<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>React | Charlotte的个人博客</title><meta name="author" content="Charlotte"><meta name="copyright" content="Charlotte"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="基础基本使用开发需要的依赖包 react:包含react所包含的核心代码 react-dom:react渲染在不同的平所需要的核心代码 babel:将jsx –&gt; React  Hello React案例基本代码 &lt;body&gt;&lt;div id&#x3D;&quot;root&quot;&gt;&lt;&#x2F;div&gt;&lt;script crossorigin src&#x3D;&quot;ht">
<meta property="og:type" content="article">
<meta property="og:title" content="React">
<meta property="og:url" content="http://example.com/2023/10/04/%E5%89%8D%E7%AB%AF%E6%A1%86%E6%9E%B6/01react/index.html">
<meta property="og:site_name" content="Charlotte的个人博客">
<meta property="og:description" content="基础基本使用开发需要的依赖包 react:包含react所包含的核心代码 react-dom:react渲染在不同的平所需要的核心代码 babel:将jsx –&gt; React  Hello React案例基本代码 &lt;body&gt;&lt;div id&#x3D;&quot;root&quot;&gt;&lt;&#x2F;div&gt;&lt;script crossorigin src&#x3D;&quot;ht">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg">
<meta property="article:published_time" content="2023-10-03T16:00:00.000Z">
<meta property="article:modified_time" content="2024-01-22T20:26:29.868Z">
<meta property="article:author" content="Charlotte">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://example.com/2023/10/04/%E5%89%8D%E7%AB%AF%E6%A1%86%E6%9E%B6/01react/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta/><meta/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":null,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"找不到您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":"300px"},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    post: true
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":50,"languages":{"author":"作者: Charlotte","link":"链接: ","source":"来源: Charlotte的个人博客","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: ,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'React',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-01-23 04:26:29'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><script>(()=>{
  const $loadingBox = document.getElementById('loading-box')
  const $body = document.body
  const preloader = {
    endLoading: () => {
      $body.style.overflow = ''
      $loadingBox.classList.add('loaded')
    },
    initLoading: () => {
      $body.style.overflow = 'hidden'
      $loadingBox.classList.remove('loaded')
    }
  }

  preloader.initLoading()
  window.addEventListener('load',() => { preloader.endLoading() })

  if (false) {
    document.addEventListener('pjax:send', () => { preloader.initLoading() })
    document.addEventListener('pjax:complete', () => { preloader.endLoading() })
  }
})()</script><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/img.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">12</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">7</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-archive"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 列表</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="not-top-img fixed" id="page-header"><nav id="nav"><span id="blog-info"><a href="/" title="Charlotte的个人博客"><span class="site-name">Charlotte的个人博客</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-archive"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 列表</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav></header><main class="layout" id="content-inner"><div id="post"><div id="post-info"><h1 class="post-title">React</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-10-03T16:00:00.000Z" title="发表于 2023-10-04 00:00:00">2023-10-04</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-01-22T20:26:29.868Z" title="更新于 2024-01-23 04:26:29">2024-01-23</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%89%8D%E7%AB%AF%E6%A1%86%E6%9E%B6/">前端框架</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">10.8k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>50分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="React"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div><article class="post-content" id="article-container"><h1 id="基础"><a href="#基础" class="headerlink" title="基础"></a>基础</h1><h2 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h2><h3 id="开发需要的依赖包"><a href="#开发需要的依赖包" class="headerlink" title="开发需要的依赖包"></a>开发需要的依赖包</h3><ol>
<li>react:包含react所包含的核心代码</li>
<li>react-dom:react渲染在不同的平所需要的核心代码</li>
<li>babel:将jsx –&gt; React</li>
</ol>
<h3 id="Hello-React案例"><a href="#Hello-React案例" class="headerlink" title="Hello React案例"></a>Hello React案例</h3><p>基本代码</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;root&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">crossorigin</span> <span class="attr">src</span>=<span class="string">&quot;https://unpkg.com/react@18/umd/react.development.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">crossorigin</span> <span class="attr">src</span>=<span class="string">&quot;https://unpkg.com/react-dom@18/umd/react-dom.development.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://unpkg.com/babel-standalone@6/babel.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--加这个type类型:text/babel,为了能将jsx语法转化为react代码--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/babel&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> message = <span class="string">&#x27;Hello World&#x27;</span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">innerHTML</span> = <span class="string">&#x27;&lt;div id=&quot;app&quot;&gt;&lt;/div&gt;&#x27;</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//1.创建一个根元素</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> root = <span class="title class_">ReactDOM</span>.<span class="title function_">createRoot</span>(<span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#app&#x27;</span>))</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> <span class="title function_">changeValue</span> = (<span class="params"></span>)=&gt;&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//修改数据</span></span></span><br><span class="line"><span class="language-javascript">        message = <span class="string">&#x27;Hello React&#x27;</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//更新数据</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">rerender</span>()</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> <span class="title function_">rerender</span> = (<span class="params"></span>)=&gt;&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//2.渲染根元素（根组件）</span></span></span><br><span class="line"><span class="language-javascript">        root.<span class="title function_">render</span>((</span></span><br><span class="line"><span class="language-javascript">            <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">                <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;message&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;changeValue&#125;</span>&gt;</span>点击我切换数据<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="language-javascript">        ))</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">rerender</span>()</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>组件的开发</p>
<ol>
<li>定义一个类（类名大写，组件的名称是必须大写的，小写会被认为是HTML元素），继承自React.Component</li>
<li>实现当前组件的render函数<br>✓ render当中返回的jsx内容，就是之后React会帮助我们渲染的内容</li>
<li>依赖的数据放在类里面的构造函数里的state里面<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;root&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">crossorigin</span> <span class="attr">src</span>=<span class="string">&quot;https://unpkg.com/react@18/umd/react.development.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">crossorigin</span> <span class="attr">src</span>=<span class="string">&quot;https://unpkg.com/react-dom@18/umd/react-dom.development.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://unpkg.com/babel-standalone@6/babel.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/babel&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">class</span> <span class="title class_">App</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span>&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">super</span>();</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">state</span> = &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">message</span>:<span class="string">&#x27;Hello React&#x27;</span></span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">render</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;this.state.message&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> root = <span class="title class_">ReactDOM</span>.<span class="title function_">createRoot</span>(<span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#root&#x27;</span>))</span></span><br><span class="line"><span class="language-javascript">  root.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">App</span>/&gt;</span></span>)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
一般在es6的环境下是严格模式，当使用text&#x2F;babel也为严格模式</li>
</ol>
<p>事件的处理（一个根本问题：this问题）</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">class App extends React.Component&#123;</span><br><span class="line">  constructor() &#123;</span><br><span class="line">    super();</span><br><span class="line">    this.state = &#123;</span><br><span class="line">      message:&#x27;Hello React&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">    //提前给需要this的方法绑定this</span><br><span class="line">    // this.changeContent = this.changeContent.bind(this)</span><br><span class="line">  &#125;</span><br><span class="line">  //方法</span><br><span class="line">  changeContent()&#123;</span><br><span class="line">    //这个函数里面进行了两步操作</span><br><span class="line">    //1.将state里面的message进行了改变2.自动进行了渲染</span><br><span class="line"></span><br><span class="line">    //this问题很重要</span><br><span class="line">    //这个this问题，这个相当于const changeContent = this.changeContent,changeContent()所以this为window/undefined</span><br><span class="line">    //所以要显示地绑定App的this const changeContent = this.changeContent.bind(this)</span><br><span class="line">    console.log(this)</span><br><span class="line">    this.setState(&#123;</span><br><span class="line">      message: &#x27;Hello World&#x27;</span><br><span class="line">    &#125;)</span><br><span class="line">    // this.render()</span><br><span class="line">  &#125;</span><br><span class="line">  render()&#123;</span><br><span class="line">    return (</span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;this.state.message&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.changeContent.bind(this)&#125;</span>&gt;</span>点击我修改文本<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="JSX语法"><a href="#JSX语法" class="headerlink" title="JSX语法"></a>JSX语法</h3><blockquote>
<p> JSX是一种JavaScript的语法扩展（eXtension），也在很多地方称之为JavaScript XML，因为看起就是一段XML语法；<br> 它用于描述我们的UI界面，并且其完成可以和JavaScript融合在一起使用；</p>
</blockquote>
<p>Jsx语法是可以赋值给变量的，总之非常灵活</p>
<p>就是html标签可以给一个变量赋值，在js中使用<br>但要在script中加上 <code>type=&quot;text/babel&quot;</code>，才能解析语法:进行语法的转换</p>
<h4 id="jsx的使用"><a href="#jsx的使用" class="headerlink" title="jsx的使用"></a>jsx的使用</h4><h5 id="jsx的书写规范"><a href="#jsx的书写规范" class="headerlink" title="jsx的书写规范"></a>jsx的书写规范</h5><p> 书写规范 </p>
<ol>
<li>jsx结构中只能有一个根元素</li>
<li>jsx结构通常会包裹一个(), 将整个jsx当做一个整体, 实现换行</li>
<li>jsx可以是单标签, 也可以双标签, 但是单标签必须以&#x2F;&gt;结尾</li>
</ol>
<h5 id="jsx的注释"><a href="#jsx的注释" class="headerlink" title="jsx的注释"></a>jsx的注释</h5><p>{ &#x2F;* JSX的注释写法 *&#x2F; }</p>
<h5 id="jsx嵌入变量作为子元素"><a href="#jsx嵌入变量作为子元素" class="headerlink" title="jsx嵌入变量作为子元素"></a>jsx嵌入变量作为子元素</h5><ol>
<li>变量为Number,String,Array</li>
<li>变量为null,undefined,Boolean,显示内容为空</li>
</ol>
<p>✓ 如果希望可以显示null、undefined、Boolean，那么需要转成字符串；<br>✓ 转换的方式有很多，比如toString方法、和空字符串拼接，String(变量)等方式；<br>3. Object对象类型不能作为子元素</p>
<h5 id="jsx嵌入表达式"><a href="#jsx嵌入表达式" class="headerlink" title="jsx嵌入表达式"></a>jsx嵌入表达式</h5><ol>
<li>运算表达式</li>
<li>三元运算符</li>
<li>执行一个函数</li>
</ol>
<h5 id="jsx使用"><a href="#jsx使用" class="headerlink" title="jsx使用"></a>jsx使用</h5><h5 id="jsx绑定属性-例如：title属性"><a href="#jsx绑定属性-例如：title属性" class="headerlink" title="jsx绑定属性(例如：title属性)"></a>jsx绑定属性(例如：title属性)</h5><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">App</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span>&#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">super</span>();</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">state</span> = &#123;</span><br><span class="line">        <span class="attr">title</span>:<span class="string">&#x27;哈哈哈&#x27;</span>,</span><br><span class="line">        <span class="attr">imgUrl</span>:<span class="string">&#x27;https://ts1.cn.mm.bing.net/th/id/R-C.95bc299c3f1f0e69b9eb1d0772b14a98?rik=W5QLhXiERW4nLQ&amp;riu=http%3a%2f%2f20178405.s21i.faiusr.com%2f2%2fABUIABACGAAgoeLO-wUo4I3o2gEw8Qs4uAg.jpg&amp;ehk=N7Bxe9nqM08w4evC2kK6yyC%2bxIWTjdd6HgXsQYPbMj0%3d&amp;risl=&amp;pid=ImgRaw&amp;r=0&#x27;</span>,</span><br><span class="line">        <span class="attr">href</span>:<span class="string">&#x27;https:baidu.com&#x27;</span>,</span><br><span class="line">        <span class="attr">isActive</span>:<span class="literal">true</span>,</span><br><span class="line">        <span class="attr">objStyle</span>:&#123;<span class="attr">color</span>:<span class="string">&#x27;red&#x27;</span>,<span class="attr">fontSize</span>:<span class="string">&#x27;30px&#x27;</span>&#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123;title,imgUrl,href,isActive,objStyle&#125; = <span class="variable language_">this</span>.<span class="property">state</span></span><br><span class="line">      <span class="comment">//1.class绑定写法一:字符串的拼接</span></span><br><span class="line">      <span class="keyword">const</span> className = <span class="string">`abc cba <span class="subst">$&#123;isActive?<span class="string">&#x27;active&#x27;</span>:<span class="string">&#x27;&#x27;</span>&#125;</span>`</span></span><br><span class="line">      <span class="comment">//2. class绑定的写法二:将所有的class放入数组中</span></span><br><span class="line">      <span class="keyword">const</span> classList = [<span class="string">&#x27;abc&#x27;</span>,<span class="string">&#x27;bcd&#x27;</span>]</span><br><span class="line">      <span class="keyword">if</span>(isActive)classList.<span class="title function_">push</span>(<span class="string">&#x27;active&#x27;</span>)</span><br><span class="line">        <span class="comment">// 3.class绑定的写法三: 第三方库classnames -&gt; npm install classnames</span></span><br><span class="line">      <span class="keyword">return</span> (</span><br><span class="line">              <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                &#123;/*1.基础属性的绑定*/&#125;</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">h2</span> <span class="attr">title</span>=<span class="string">&#123;title&#125;</span>&gt;</span><span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&#123;imgUrl&#125;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml">                &#123;/*2.绑定class属性最好使用className*/&#125;</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">h2</span> <span class="attr">className</span>=<span class="string">&#123;className&#125;</span>&gt;</span><span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">h2</span> <span class="attr">className</span>=<span class="string">&#123;classList.join(</span>&#x27; &#x27;)&#125;&gt;</span><span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                  &#123;/*3.绑定style属性：绑定对象类型*/&#125;</span></span><br><span class="line"><span class="language-xml">                  <span class="tag">&lt;<span class="name">h2</span> <span class="attr">style</span>=<span class="string">&#123;&#123;color:</span>&#x27;<span class="attr">red</span>&#x27;,<span class="attr">fontSize:</span>&#x27;<span class="attr">30px</span>&#x27;&#125;&#125;&gt;</span>你好呀<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                  <span class="tag">&lt;<span class="name">h2</span> <span class="attr">style</span>=<span class="string">&#123;objStyle&#125;</span>&gt;</span>你好呀<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">              <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">      );</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> root = <span class="title class_">ReactDOM</span>.<span class="title function_">createRoot</span>(<span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#root&#x27;</span>))</span><br><span class="line">  root.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">App</span>/&gt;</span></span>)</span><br></pre></td></tr></table></figure>

<h2 id="React"><a href="#React" class="headerlink" title="React"></a>React</h2><h3 id="脚手架"><a href="#脚手架" class="headerlink" title="脚手架"></a>脚手架</h3><h4 id="react事件绑定-推荐传入箭头函数"><a href="#react事件绑定-推荐传入箭头函数" class="headerlink" title="react事件绑定(推荐传入箭头函数)"></a>react事件绑定(推荐传入箭头函数)</h4><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> (</span><br><span class="line">              <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                &#123;/*1.bind绑定*/&#125;</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.btn1Click.bind(this)&#125;</span>&gt;</span>按钮1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                &#123;/*2.this绑定第二种:es6的class file*/&#125;</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.btn2Click&#125;</span>&gt;</span>按钮2<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                &#123;/*3.传入一个箭头函数,这个重要*/&#125;</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span>=&gt;</span>this.btn3Click()&#125;&gt;按钮3<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">button</span>&gt;</span>按钮4<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">h2</span>&gt;</span>当前计数:&#123;this.state.counter&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">              <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">      );</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h4 id="事件参数传递"><a href="#事件参数传递" class="headerlink" title="事件参数传递"></a>事件参数传递</h4><ol>
<li>获取event参数</li>
<li>获取更多参数<br>有更多参数时，我们最好的方式就是传入一个箭头函数，主动执行的事件函数，并且传入相关的其他参数；<img src="/img.png" alt="img.png"></li>
</ol>
<h4 id="条件渲染"><a href="#条件渲染" class="headerlink" title="条件渲染"></a>条件渲染</h4><p>◼ 常见的条件渲染的方式有哪些呢？</p>
<ol>
<li>◼ 方式一：条件判断语句<br> 适合逻辑较多的情况</li>
<li>◼ 方式二：三元运算符<br> 适合逻辑比较简单</li>
<li>◼ 方式三：与运算符&amp;&amp;<br> 适合如果条件成立，渲染某一个组件；如果条件不成立，什么内容也不渲染<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">App</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">   <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">     <span class="variable language_">super</span>();</span><br><span class="line">     <span class="variable language_">this</span>.<span class="property">state</span> = &#123;</span><br><span class="line">       <span class="attr">isReady</span>:<span class="literal">false</span>,</span><br><span class="line">       <span class="attr">friend</span>:<span class="literal">undefined</span></span><br><span class="line">     &#125;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">     <span class="keyword">const</span> &#123;isReady,friend&#125; = <span class="variable language_">this</span>.<span class="property">state</span></span><br><span class="line">     <span class="keyword">let</span> showElement = <span class="literal">null</span></span><br><span class="line">     <span class="keyword">if</span>(isReady)&#123;</span><br><span class="line">       showElement = <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>你好呀<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">     &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">       showElement = <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>再见<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">     &#125;</span><br><span class="line">     <span class="keyword">return</span> (</span><br><span class="line">             <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">               /*if渲染*/</span></span><br><span class="line"><span class="language-xml">               <span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;showElement&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">               &#123;/*三元运算符*/&#125;</span></span><br><span class="line"><span class="language-xml">               <span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;isReady?<span class="tag">&lt;<span class="name">h2</span>&gt;</span>你好呀<span class="tag">&lt;/<span class="name">h2</span>&gt;</span>:<span class="tag">&lt;<span class="name">h2</span>&gt;</span>再见<span class="tag">&lt;/<span class="name">h2</span>&gt;</span>&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">               &#123;/*逻辑&amp;&amp;*/&#125;</span></span><br><span class="line"><span class="language-xml">               <span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;friend &amp;&amp; <span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;friend.name + &quot; &quot; + friend.desc&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span>&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">             <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">     );</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="脚手架开发"><a href="#脚手架开发" class="headerlink" title="脚手架开发"></a>脚手架开发</h4><h5 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h5><p>一、第一种方式</p>
<ol>
<li>先全局安装脚手架工具包</li>
</ol>
<p>命令：pnpm i -g create-react-app</p>
<ol start="2">
<li>用脚手架工具来创建项目</li>
</ol>
<p>命令：create-react-app + 项目名称</p>
<p>二、第二种方式<br>创建方式2<br>直接使用npx来创建项目</p>
<p>命令：</p>
<p>npx create-react-app + 项目名称</p>
<p>解释：</p>
<p>npx create-react-app 是固定命令，create-react-app 是 React 脚手架的名称</p>
<h5 id="目录结构"><a href="#目录结构" class="headerlink" title="目录结构"></a>目录结构</h5><p><img src="/img_3.png" alt="img_3.png"></p>
<h5 id="脚手架的webpack"><a href="#脚手架的webpack" class="headerlink" title="脚手架的webpack"></a>脚手架的webpack</h5><p>![img_4.png](img_4.</p>
<h4 id="列表渲染"><a href="#列表渲染" class="headerlink" title="列表渲染"></a>列表渲染</h4><p>如何展示列表呢？<br> 在React中，展示列表最多的方式就是使用数组的map高阶函数；</p>
<p>◼ 很多时候我们在展示一个数组中的数据之前，需要先对它进行一些处理：</p>
<p> 比如过滤掉一些内容：filter函数<br> 比如截取数组中的一部分内容：slice函数</p>
<h4 id="脚手架-1"><a href="#脚手架-1" class="headerlink" title="脚手架"></a>脚手架</h4><p><img src="/img_1.png" alt="img_1.png"><br>前端脚手架<br><img src="/img_2.png" alt="img_2.png"><br>使用前端脚手架创建项目</p>
<h3 id="组件化开发"><a href="#组件化开发" class="headerlink" title="组件化开发"></a>组件化开发</h3><h4 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h4><blockquote>
<p>概念和vue一样<br>组件的分类:函数组件，类组件。无状态组件，有状态组件。展示性组件，容器性组件</p>
</blockquote>
<p>类组件的要求（怎么定义前面写了）</p>
<blockquote>
<ol>
<li>名称大写字符开头</li>
<li>继承React.Component</li>
<li>实现render函数</li>
</ol>
</blockquote>
<p>函数组件<br><img src="/img_7.png" alt="img_7.png"></p>
<h4 id="生命周期"><a href="#生命周期" class="headerlink" title="生命周期"></a>生命周期</h4><p>最常用的<br><img src="/img_8.png" alt="img_8.png"></p>
<p><code>Constructor</code><br>如果不初始化 state 或不进行方法绑定，则不需要为 React 组件实现构造函数。<br>constructor中通常只做两件事情：</p>
<ol>
<li>通过给this.state赋值对象来初始化内部的state；</li>
<li>为事件绑定实例（this）；</li>
</ol>
<p><code>componentDidMount</code><br>componentDidMount()会在组件挂载后（插入 DOM 树中）立即调用。<br>componentDidMount中通常进行哪里操作呢？<br>依赖于DOM的操作可以在这里进行；</p>
<ol>
<li>在此处发送网络请求就最好的地方；（官方建议）</li>
<li>可以在此处添加一些订阅（会在componentWillUnmount取消订阅）；</li>
</ol>
<p><code>componentDidUpdate</code><br>componentDidUpdate()会在<code>更新后会被立即调用</code>，首次渲染不会执行此方法。<br>当组件更新后，可以在此处对 DOM 进行操作；</p>
<ol>
<li>如果你对更新前后的 props 进行了比较，也可以选择在此处进行网络请求；（例如，当 props 未发生变化时，则不会执行网络请求）。</li>
</ol>
<p><code>componentWillUnmount</code><br>componentWillUnmount()会在组件卸载及销毁之前直接调用。<br>在此方法中执行必要的清理操作；</p>
<ol>
<li>例如，清除 timer，取消网络请求或清除在componentDidMount() 中创建的订阅等；</li>
</ol>
<p>不常用的插槽<br><img src="/img_9.png" alt="img_9.png"></p>
<h4 id="组件之间的通信"><a href="#组件之间的通信" class="headerlink" title="组件之间的通信"></a>组件之间的通信</h4><h5 id="父传子"><a href="#父传子" class="headerlink" title="父传子"></a>父传子</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">//父组件</span><br><span class="line">function App() &#123;</span><br><span class="line">   return (</span><br><span class="line">           &lt;div className=&quot;App&quot;&gt;</span><br><span class="line">           &lt;Header title=&quot;我是头部呀&quot; age=&#123;18&#125; height=&#123;1.8&#125;&gt;&lt;/Header&gt;</span><br><span class="line">           &lt;Main&gt;&lt;/Main&gt;</span><br><span class="line">           &lt;Footer&gt;&lt;/Footer&gt;</span><br><span class="line">           &lt;/div&gt;</span><br><span class="line">);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="comment">//子组件</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123;<span class="title class_">Component</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Header</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span> &#123;</span><br><span class="line">   <span class="title function_">constructor</span>(<span class="params">props</span>) &#123;</span><br><span class="line">      <span class="variable language_">super</span>();</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">props</span> = props;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123;title, age, height&#125; = <span class="variable language_">this</span>.<span class="property">props</span>;</span><br><span class="line">      <span class="keyword">return</span> (</span><br><span class="line"></span><br><span class="line">              <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                 <span class="tag">&lt;<span class="name">h2</span>&gt;</span>展示父组件<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                 <span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;title&#125;&#123;age&#125;&#123;height&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">              <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">      );</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//传递来的参数默认值</span></span><br><span class="line"><span class="title class_">Header</span>.<span class="property">defaultProps</span> = &#123;</span><br><span class="line">   <span class="attr">title</span>:<span class="string">&#x27;123&#x27;</span>,</span><br><span class="line">   <span class="attr">age</span>:<span class="number">19</span>,</span><br><span class="line">   <span class="attr">height</span>:<span class="number">1.9</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Header</span>;</span><br></pre></td></tr></table></figure>
<p>类型验证（ts&#x2F;prop-types）’</p>
<p>需要的时候查文档<br><a target="_blank" rel="noopener" href="https://zh-hans.reactjs.org/docs/typechecking-with-proptypes.html">https://zh-hans.reactjs.org/docs/typechecking-with-proptypes.html</a></p>
<p>当没有传递的时候希望有默认值的时候:defaultProps</p>
<h5 id="子传父"><a href="#子传父" class="headerlink" title="子传父"></a>子传父</h5><p>在React中同样是通过props传递消息，只是让父组件给子组件传递一个回调函数，在子组件中调用这个函数即可；</p>
<p>父亲给儿子传递一个函数，儿子进行调用就可以了</p>
<p>计时器的案例(自己去看源码)</p>
<h5 id="组件通信案例（tab栏切换）"><a href="#组件通信案例（tab栏切换）" class="headerlink" title="组件通信案例（tab栏切换）"></a>组件通信案例（tab栏切换）</h5><p>自行查看</p>
<h5 id="React中的插槽"><a href="#React中的插槽" class="headerlink" title="React中的插槽"></a>React中的插槽</h5><ol>
<li>组件的children元素</li>
<li>props属性传递React元素</li>
</ol>
<h6 id="组件的children"><a href="#组件的children" class="headerlink" title="组件的children"></a>组件的children</h6><p>每个组件都可以获取到props.children:包含组件的开始标签和结束标签</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123;<span class="title class_">Component</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Nav</span> <span class="keyword">from</span> <span class="string">&quot;./nav&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">App2</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span> &#123;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">Nav</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">button</span>&gt;</span>我是按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>我是标题<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">span</span>&gt;</span>span<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">Nav</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App2</span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123;<span class="title class_">Component</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./index.module.css&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Nav</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">props</span>) &#123;</span><br><span class="line">        <span class="variable language_">super</span>(props);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123;children&#125; = <span class="variable language_">this</span>.<span class="property">props</span></span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#x27;nav-bar&#x27;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#x27;left&#x27;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                    &#123;children[0]&#125;</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#x27;center&#x27;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                    &#123;children[1]&#125;</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#x27;right&#x27;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                    &#123;children[2]&#125;</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Nav</span>;</span><br></pre></td></tr></table></figure>
<h6 id="props来实现"><a href="#props来实现" class="headerlink" title="props来实现"></a>props来实现</h6><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123;<span class="title class_">Component</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./NavBar.css&#x27;</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">NavBar</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span> &#123;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123;left,center,right&#125; = <span class="variable language_">this</span>.<span class="property">props</span></span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#x27;nav-bar&#x27;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#x27;left&#x27;</span>&gt;</span>&#123;left&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#x27;center&#x27;</span>&gt;</span>&#123;center&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#x27;right&#x27;</span>&gt;</span>&#123;right&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">NavBar</span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123;<span class="title class_">Component</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">NavBar</span> <span class="keyword">from</span> <span class="string">&quot;./NavBar&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">App2</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span> &#123;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> left = <span class="language-xml"><span class="tag">&lt;<span class="name">button</span>&gt;</span>我是按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">        <span class="keyword">const</span> center = <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>我是标题<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">        <span class="keyword">const</span> right =  <span class="language-xml"><span class="tag">&lt;<span class="name">span</span>&gt;</span>span<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">NavBar</span> <span class="attr">left</span>=<span class="string">&#123;left&#125;</span> <span class="attr">center</span>=<span class="string">&#123;center&#125;</span> <span class="attr">right</span>=<span class="string">&#123;right&#125;</span>&gt;</span><span class="tag">&lt;/<span class="name">NavBar</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App2</span>;</span><br></pre></td></tr></table></figure>



<h5 id="非父子间的通信"><a href="#非父子间的通信" class="headerlink" title="非父子间的通信"></a>非父子间的通信</h5><h6 id="Context"><a href="#Context" class="headerlink" title="Context"></a>Context</h6><blockquote>
<p>数据共享</p>
</blockquote>
<p>相关API</p>
<ol>
<li>React.createContext<br>创建一个需要共享的Context对象</li>
<li>Context.Provider<ol>
<li>每个 Context 对象都会返回一个 Provider React 组件，它允许消费组件订阅 context 的变化：</li>
<li>Provider 接收一个value属性，传递给消费组件；</li>
<li>一个 Provider 可以和多个消费组件有对应关系；</li>
<li>多个 Provider 也可以嵌套使用，里层的会覆盖外层的数据；</li>
<li>当 Provider 的value值发生变化时，它内部的所有消费组件都会重新渲染；</li>
</ol>
</li>
<li>Context.Consumer<br>这里需要 函数作为子元素（function as child）这种做法；</li>
<li>Class.contextType<br>MyClass.contextType &#x3D; MyContext</li>
</ol>
<p>使用步骤</p>
<ol>
<li>创建上下文（Context）对象<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="comment">//设置上下文，创建Context对象</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">ThemeContext</span> = <span class="title class_">React</span>.<span class="title function_">createContext</span>()</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">ThemeContext</span></span><br></pre></td></tr></table></figure>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="comment">//设置上下文，创建Context对象</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">UserContext</span> = <span class="title class_">React</span>.<span class="title function_">createContext</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">UserContext</span></span><br></pre></td></tr></table></figure></li>
<li>第二步操作: 通过ThemeContext中Provider中value属性为后代提供数据，Context.Provider<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123;<span class="title class_">Component</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Home</span> <span class="keyword">from</span> <span class="string">&quot;./Home&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">HomeBanner</span> <span class="keyword">from</span> <span class="string">&quot;./HomeBanner&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Profile</span> <span class="keyword">from</span> <span class="string">&quot;./Profile&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">UserContext</span> <span class="keyword">from</span> <span class="string">&quot;./context/user-context&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ThemeContext</span> <span class="keyword">from</span> <span class="string">&quot;./context/theme-context&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">App2</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">super</span>();</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">state</span> = &#123;</span><br><span class="line">            <span class="attr">info</span>:&#123;</span><br><span class="line">                <span class="attr">name</span>:<span class="string">&#x27;你好&#x27;</span>,</span><br><span class="line">                <span class="attr">age</span>:<span class="number">99</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123;info&#125; = <span class="variable language_">this</span>.<span class="property">state</span></span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">UserContext.Provider</span> <span class="attr">value</span>=<span class="string">&#123;&#123;nickname:</span>&#x27;<span class="attr">kobe</span>&#x27;,<span class="attr">age:19</span>&#125;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">ThemeContext.Provider</span> <span class="attr">value</span>=<span class="string">&#123;&#123;color:</span>&#x27;<span class="attr">red</span>&#x27;,<span class="attr">size:</span>&#x27;<span class="attr">30</span>&#x27;&#125;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">                        <span class="tag">&lt;<span class="name">Home</span> &#123;<span class="attr">...info</span>&#125;&gt;</span><span class="tag">&lt;/<span class="name">Home</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;/<span class="name">ThemeContext.Provider</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">UserContext.Provider</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">Profile</span>&gt;</span><span class="tag">&lt;/<span class="name">Profile</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App2</span>;</span><br></pre></td></tr></table></figure></li>
<li>第三步操作: 设置组件的contextType为某一个Context<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123;<span class="title class_">Component</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">UserContext</span> <span class="keyword">from</span> <span class="string">&quot;./context/user-context&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ThemeContext</span> <span class="keyword">from</span> <span class="string">&quot;./context/theme-context&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">HomeInfo</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span> &#123;</span><br><span class="line">    <span class="comment">//第四步：获取数据，使用数据(这个是类组件中的写法)</span></span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">UserContext.Consumer</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                    &#123;</span></span><br><span class="line"><span class="language-xml">                        value =&gt; &#123;</span></span><br><span class="line"><span class="language-xml">                            return <span class="tag">&lt;<span class="name">h2</span>&gt;</span>Info User:&#123;value.nickname&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                        &#125;</span></span><br><span class="line"><span class="language-xml">                    &#125;</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">UserContext.Consumer</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">HomeInfo</span>.<span class="property">contextType</span> = <span class="title class_">ThemeContext</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">HomeInfo</span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line">函数组件的操作</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123;<span class="title class_">Component</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ThemeContext</span> <span class="keyword">from</span> <span class="string">&quot;./context/theme-context&quot;</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">HomeBanner</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            &#123;/*函数式组件使用Context共享数据*/&#125;</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">ThemeContext.Consumer</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                &#123;</span></span><br><span class="line"><span class="language-xml">                    value =&gt; &#123;</span></span><br><span class="line"><span class="language-xml">                        return <span class="tag">&lt;<span class="name">h2</span>&gt;</span>Banner theme:&#123;value.color&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                    &#125;</span></span><br><span class="line"><span class="language-xml">                &#125;</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">ThemeContext.Consumer</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">HomeBanner</span>;</span><br></pre></td></tr></table></figure></li>
<li>第四步操作: 获取数据, 并且使用数据</li>
</ol>
<h4 id="性能优化"><a href="#性能优化" class="headerlink" title="性能优化"></a>性能优化</h4><p>渲染机制</p>
<p>Jsx -&gt; 虚拟Dom -&gt; 真实Dom</p>
<p>react的更新机制</p>
<p>props&#x2F;state改变 -&gt; render函数重新执行 -&gt; 产生新的DOM树 -&gt; 新旧DOM树进行diff -&gt; 计算出差异进行更新 -&gt; 更新到真实DOM</p>
<h5 id="keys优化"><a href="#keys优化" class="headerlink" title="keys优化"></a>keys优化</h5><p>遍历列表，需要加上key</p>
<p>注意:</p>
<ol>
<li>key是唯一的</li>
<li>不要用随机数</li>
<li>使用index，不会做优化</li>
</ol>
<h5 id="render函数优化"><a href="#render函数优化" class="headerlink" title="render函数优化"></a>render函数优化</h5><p>当更改一个数据，组件就需要render，进行diff算法，性能会很低，所以有了解决方法</p>
<p>shouldComponentUpdate,接收两个参数:nextProps(修改后的props),nextState(修改后的state),它的<br>主要作用是判断props和state数据是否发生改变，来决定true还是false</p>
<p>返回true，就会render，返回false，不会render</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="title function_">shouldComponentUpdate</span>(<span class="params">nextProps</span>)&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">props</span>.<span class="property">counter</span> !== nextProps.<span class="property">counter</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<h4 id="PureComponent"><a href="#PureComponent" class="headerlink" title="PureComponent"></a>PureComponent</h4><p>如果要是手动的实现上面的行为，会很繁琐，react已经配置好了，再PureComponent,就是在里面弄就可以了（rpc）</p>
<h4 id="高阶组件memo"><a href="#高阶组件memo" class="headerlink" title="高阶组件memo"></a>高阶组件memo</h4><p>类可以通过PureComponent来实现，函数组件可以用memo来实现，在想要实现上述的效果的函数组件外面包一层memo</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; memo &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Profile</span> = <span class="title function_">memo</span>(<span class="keyword">function</span>(<span class="params">props</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;profile render&quot;</span>)</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>Profile: &#123;props.message&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Profile</span></span><br></pre></td></tr></table></figure>
<h4 id="不可变的数据"><a href="#不可变的数据" class="headerlink" title="不可变的数据"></a>不可变的数据</h4><p>就是说不能直接改变this.setState里面的数据，可以进行拷贝（浅拷贝）</p>
<h4 id="获取DOM方式refs"><a href="#获取DOM方式refs" class="headerlink" title="获取DOM方式refs"></a>获取DOM方式refs</h4><blockquote>
<p>通常不需要和不建议直接操作DOM原生</p>
</blockquote>
<h3 id="原理类的"><a href="#原理类的" class="headerlink" title="原理类的"></a>原理类的</h3><h4 id="为什么使用setState"><a href="#为什么使用setState" class="headerlink" title="为什么使用setState"></a>为什么使用setState</h4><h4 id="vue3和react中在数据上的区别"><a href="#vue3和react中在数据上的区别" class="headerlink" title="vue3和react中在数据上的区别"></a>vue3和react中在数据上的区别</h4><ol>
<li>vue3是数据劫持,通过对数据进行劫持来监听数据的变化</li>
<li>React中没有数据劫持,必须通过setState来告知React数据已经发生了变化；</li>
</ol>
<h4 id="React的setState是异步更新的优点"><a href="#React的setState是异步更新的优点" class="headerlink" title="React的setState是异步更新的优点"></a>React的setState是异步更新的优点</h4><p>setState设计为异步，可以显著的提升性能；</p>
<ol>
<li>如果每次调用 setState都进行一次更新，那么意味着render函数会被频繁调用，界面重新渲染，这样效率是很低的；</li>
</ol>
<p>最好的办法应该是获取到多个更新，之后进行批量更新；<br>2. 如果同步更新了state，但是还没有执行render函数，那么state和props不能保持同步；<br>state和props不能保持一致性，会在开发中产生很多的问题；</p>
<h4 id="setState的使用"><a href="#setState的使用" class="headerlink" title="setState的使用"></a>setState的使用</h4><p>setState接受两个参数：第二个参数是一个回调函数，这个回调函数会在更新后会执行；<br>格式如下：setState(partialState, callback)</p>
<h4 id="setState咋18前和后区别"><a href="#setState咋18前和后区别" class="headerlink" title="setState咋18前和后区别"></a>setState咋18前和后区别</h4><ol>
<li><p>前</p>
<p>其实分成两种情况：</p>
<ol>
<li>在组件生命周期或React合成事件中，setState是异步；</li>
<li>在setTimeout或者原生dom事件中，setState是同步；</li>
</ol>
</li>
<li><p>后</p>
</li>
</ol>
<p>所有的都为异步的</p>
<h3 id="在react中写css的方案"><a href="#在react中写css的方案" class="headerlink" title="在react中写css的方案"></a>在react中写css的方案</h3><h4 id="内联样式"><a href="#内联样式" class="headerlink" title="内联样式"></a>内联样式</h4><ol>
<li>style 接受一个采用小驼峰命名属性的 JavaScript 对象，，而不是 CSS 字符串；</li>
<li>并且可以引用state中的状态来设置相关的样式；</li>
</ol>
<p>缺点</p>
<ol>
<li>写法上都需要使用驼峰标识</li>
<li>某些样式没有提示</li>
<li>大量的样式, 代码混乱</li>
<li>某些样式无法编写(比如伪类&#x2F;伪元素)<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123;<span class="title class_">Component</span>, <span class="title class_">PureComponent</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Index</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">props</span>) &#123;</span><br><span class="line">        <span class="variable language_">super</span>(props);</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">state</span> = &#123;</span><br><span class="line">            titleSize :<span class="number">10</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">addTitleSize</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">            <span class="attr">titleSize</span>:<span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">titleSize</span> +<span class="number">2</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;e</span>=&gt;</span>this.addTitleSize()&#125;&gt;点击我增加字体大小<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">h2</span> <span class="attr">style</span>=<span class="string">&#123;&#123;fontSize:</span>`$&#123;<span class="attr">this.state.titleSize</span>&#125;<span class="attr">px</span>`,<span class="attr">color:</span>&quot;<span class="attr">red</span>&quot;&#125;&#125;&gt;</span>我是标题<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">p</span>&gt;</span>我是内容哈哈<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Index</span>;</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="单独的css文件引入"><a href="#单独的css文件引入" class="headerlink" title="单独的css文件引入"></a>单独的css文件引入</h4><p>和以前写css一样</p>
<p>缺点：</p>
<ol>
<li>这个css文件没有作用域，是全局生效的</li>
<li>样式之间会重叠</li>
</ol>
<h4 id="CSS-Module写法"><a href="#CSS-Module写法" class="headerlink" title="CSS Module写法"></a>CSS Module写法</h4><blockquote>
<p>css modules并不是React特有的解决方案，而是所有使用了类似于webpack配置的环境下都可以使用的。<br> 如果在其他项目中使用它，那么我们需要自己来进行配置，比如配置webpack.config.js中的modules: true等。</p>
</blockquote>
<p>好处解决了局部作用域问题</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">index<span class="selector-class">.module</span><span class="selector-class">.css</span></span><br><span class="line"><span class="selector-class">.title</span>&#123;</span><br><span class="line">    <span class="attribute">color</span>:red;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.content</span>&#123;</span><br><span class="line">    <span class="attribute">color</span>: blue;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">13px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line">使用</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123;<span class="title class_">PureComponent</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> home <span class="keyword">from</span> <span class="string">&#x27;./index.module.css&#x27;</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Index</span> <span class="keyword">extends</span> <span class="title class_ inherited__">PureComponent</span> &#123;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">h2</span> <span class="attr">className</span>=<span class="string">&#123;home.title&#125;</span>&gt;</span>我是标题<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">p</span> <span class="attr">className</span>=<span class="string">&#123;home.content&#125;</span>&gt;</span>哈哈，我是内容<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Index</span>;</span><br></pre></td></tr></table></figure>
<h4 id="CSS-in-JS-写法"><a href="#CSS-in-JS-写法" class="headerlink" title="CSS in JS 写法"></a>CSS in JS 写法</h4><h5 id="预备知识"><a href="#预备知识" class="headerlink" title="预备知识"></a>预备知识</h5><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//这个相当于调用了foo函数，返回的是一个数组 ：[ [ &#x27;my name is &#x27;, &#x27;,age is &#x27;, &#x27;&#x27; ], &#x27;ymj&#x27;, 18 ]</span></span><br><span class="line"><span class="keyword">const</span> name = <span class="string">&#x27;ymj&#x27;</span></span><br><span class="line"><span class="keyword">const</span> age = <span class="number">18</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">foo</span>(<span class="params">...arg</span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(arg)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">foo<span class="string">`my name is <span class="subst">$&#123;name&#125;</span>,age is <span class="subst">$&#123;age&#125;</span>`</span></span><br></pre></td></tr></table></figure>
<h5 id="基本使用-1"><a href="#基本使用-1" class="headerlink" title="基本使用"></a>基本使用</h5><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line">css_jsx</span><br><span class="line"><span class="keyword">import</span> styled <span class="keyword">from</span> <span class="string">&quot;styled-components&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//1. 基本的使用</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title class_">HomeWrapper</span> = styled.<span class="property">div</span><span class="string">`</span></span><br><span class="line"><span class="string">  .top&#123;</span></span><br><span class="line"><span class="string">    .banner&#123;</span></span><br><span class="line"><span class="string">      font-size: 22px;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">  .bottom&#123;</span></span><br><span class="line"><span class="string">    .product_list&#123;</span></span><br><span class="line"><span class="string">      .product_item1&#123;</span></span><br><span class="line"><span class="string">        color: red;</span></span><br><span class="line"><span class="string">      &#125;</span></span><br><span class="line"><span class="string">      .product_item2&#123;</span></span><br><span class="line"><span class="string">        color: pink;</span></span><br><span class="line"><span class="string">      &#125;</span></span><br><span class="line"><span class="string">      .product_item3&#123;</span></span><br><span class="line"><span class="string">        color: #61dafb;</span></span><br><span class="line"><span class="string">      &#125;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">`</span></span><br></pre></td></tr></table></figure>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123;<span class="title class_">PureComponent</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">HomeWrapper</span>&#125; <span class="keyword">from</span> <span class="string">&quot;./homs_css&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Home</span> <span class="keyword">extends</span> <span class="title class_ inherited__">PureComponent</span> &#123;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;<span class="name">HomeWrapper</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;top&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;banner&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                        我是轮播图</span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;bottom&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">className</span>=<span class="string">&quot;product_list&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                        <span class="tag">&lt;<span class="name">li</span> <span class="attr">className</span>=<span class="string">&quot;product_item1&quot;</span>&gt;</span>商品1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                        <span class="tag">&lt;<span class="name">li</span> <span class="attr">className</span>=<span class="string">&quot;product_item2&quot;</span>&gt;</span>商品2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                        <span class="tag">&lt;<span class="name">li</span> <span class="attr">className</span>=<span class="string">&quot;product_item3&quot;</span>&gt;</span>商品3<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">HomeWrapper</span>&gt;</span></span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Home</span>;</span><br></pre></td></tr></table></figure>
<p>还可以进行拆分(子元素单独抽取到一个样式文件里面)</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> styled <span class="keyword">from</span> <span class="string">&quot;styled-components&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//1. 基本的使用</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title class_">HomeWrapper</span> = styled.<span class="property">div</span><span class="string">`</span></span><br><span class="line"><span class="string">  .top&#123;</span></span><br><span class="line"><span class="string">    .banner&#123;</span></span><br><span class="line"><span class="string">      font-size: 22px;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">`</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title class_">BottomWrapper</span> = styled.<span class="property">div</span><span class="string">`</span></span><br><span class="line"><span class="string">    .product_list&#123;</span></span><br><span class="line"><span class="string">      .product_item1&#123;</span></span><br><span class="line"><span class="string">        color: red;</span></span><br><span class="line"><span class="string">      &#125;</span></span><br><span class="line"><span class="string">      .product_item2&#123;</span></span><br><span class="line"><span class="string">        color: pink;</span></span><br><span class="line"><span class="string">      &#125;</span></span><br><span class="line"><span class="string">      .product_item3&#123;</span></span><br><span class="line"><span class="string">        color: #61dafb;</span></span><br><span class="line"><span class="string">      &#125;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">`</span></span><br></pre></td></tr></table></figure>
<h5 id="在css中使用js-props的使用"><a href="#在css中使用js-props的使用" class="headerlink" title="在css中使用js(props的使用)"></a>在css中使用js(props的使用)</h5><h6 id="使用props"><a href="#使用props" class="headerlink" title="使用props"></a>使用props</h6><p>非常方便，别的方案会很麻烦<br>外部的组件给样式组件传入值，来进行在css中使用js的变量，使用函数的形式实现</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> styled <span class="keyword">from</span> <span class="string">&quot;styled-components&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//1. 基本的使用</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title class_">HomeWrapper</span> = styled.<span class="property">div</span><span class="string">`</span></span><br><span class="line"><span class="string">  .top&#123;</span></span><br><span class="line"><span class="string">    .banner&#123;</span></span><br><span class="line"><span class="string">      font-size: <span class="subst">$&#123;props=&gt;props.size&#125;</span>px;</span></span><br><span class="line"><span class="string">      color:<span class="subst">$&#123;props=&gt;props.color&#125;</span>;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">`</span></span><br></pre></td></tr></table></figure>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123;<span class="title class_">PureComponent</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">BottomWrapper</span>, <span class="title class_">HomeWrapper</span>&#125; <span class="keyword">from</span> <span class="string">&quot;./homs_css&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Home</span> <span class="keyword">extends</span> <span class="title class_ inherited__">PureComponent</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">super</span>();</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">state</span> = &#123;</span><br><span class="line">            <span class="attr">size</span>:<span class="number">30</span>,</span><br><span class="line">            <span class="attr">color</span>:<span class="string">&quot;yellow&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123;color,size&#125; = <span class="variable language_">this</span>.<span class="property">state</span></span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;<span class="name">HomeWrapper</span> <span class="attr">color</span>=<span class="string">&#123;color&#125;</span> <span class="attr">size</span>=<span class="string">&#123;size&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;top&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;banner&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                        我是轮播图</span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">BottomWrapper</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">className</span>=<span class="string">&quot;product_list&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                        <span class="tag">&lt;<span class="name">li</span> <span class="attr">className</span>=<span class="string">&quot;product_item1&quot;</span>&gt;</span>商品1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                        <span class="tag">&lt;<span class="name">li</span> <span class="attr">className</span>=<span class="string">&quot;product_item2&quot;</span>&gt;</span>商品2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                        <span class="tag">&lt;<span class="name">li</span> <span class="attr">className</span>=<span class="string">&quot;product_item3&quot;</span>&gt;</span>商品3<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">BottomWrapper</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">HomeWrapper</span>&gt;</span></span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Home</span>;</span><br></pre></td></tr></table></figure>
<h6 id="使用attrs给标签字符串提供属性"><a href="#使用attrs给标签字符串提供属性" class="headerlink" title="使用attrs给标签字符串提供属性"></a>使用attrs给标签字符串提供属性</h6><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="comment">//1. 基本的使用</span></span><br><span class="line"><span class="comment">//如果没有传递元素的话，可以添加默认值</span></span><br><span class="line"><span class="comment">// 使用styled.div.attrs来实现</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title class_">HomeWrapper</span> = styled.<span class="property">div</span>.<span class="title function_">attrs</span>(<span class="function"><span class="params">props</span>=&gt;</span>(&#123;</span><br><span class="line">    <span class="attr">tcolor</span>:props.<span class="property">color</span>||<span class="string">&quot;blue&quot;</span></span><br><span class="line">&#125;))<span class="string">`</span></span><br><span class="line"><span class="string">  .top&#123;</span></span><br><span class="line"><span class="string">    .banner&#123;</span></span><br><span class="line"><span class="string">      font-size: <span class="subst">$&#123;props=&gt;props.size&#125;</span>px;</span></span><br><span class="line"><span class="string">      color:<span class="subst">$&#123;props=&gt;props.tcolor&#125;</span>;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">`</span></span><br></pre></td></tr></table></figure>
<h5 id="设置全局的样式"><a href="#设置全局的样式" class="headerlink" title="设置全局的样式"></a>设置全局的样式</h5><p>将全局的样式放在一个文件里面，需要什么的时候引入即可</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="comment">//variables.js文件中，当使用公共主题色的时候引入即可</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> primaryColor = <span class="string">&quot;#ff8822&quot;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> secondColor = <span class="string">&quot;#ff7788&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> smallSize = <span class="string">&quot;12px&quot;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> middleSize = <span class="string">&quot;14px&quot;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> largeSize = <span class="string">&quot;18px&quot;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>也可以使用主题提供</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ThemeProvider theme=&#123;&#123;color:&quot;red&quot;,size:&quot;19px&quot;&#125;&#125;&gt;&lt;/ThemeProvider&gt;</span><br></pre></td></tr></table></figure>
<h5 id="样式的继承"><a href="#样式的继承" class="headerlink" title="样式的继承"></a>样式的继承</h5><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="comment">//样式的继承</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">HYButton</span> = styled.<span class="property">button</span><span class="string">`</span></span><br><span class="line"><span class="string">  padding: 8px 30px;</span></span><br><span class="line"><span class="string">  border-radius: 5px;</span></span><br><span class="line"><span class="string">`</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">HYWarnButton</span> = styled.<span class="title function_">button</span>(<span class="title class_">HYButton</span>)<span class="string">`</span></span><br><span class="line"><span class="string">  background-color:red ;</span></span><br><span class="line"><span class="string">`</span></span><br></pre></td></tr></table></figure>
<h4 id="动态添加class"><a href="#动态添加class" class="headerlink" title="动态添加class"></a>动态添加class</h4><p>安装一个库 classnames<br><img src="/img_10.png" alt="img_10.png"></p>
<h2 id="Redux"><a href="#Redux" class="headerlink" title="Redux"></a>Redux</h2><h3 id="js的纯函数"><a href="#js的纯函数" class="headerlink" title="js的纯函数"></a>js的纯函数</h3><blockquote>
<ol>
<li>确定的输入，一定会产生确定的输出；</li>
<li>函数在执行过程中，不能产生副作用；</li>
</ol>
</blockquote>
<p>副作用：调用了这个函数，对外部产生了一些影响（1.依赖外部的变量，修改外部的变量，修改参数或者改变外部的存储）</p>
<p>React中就要求我们无论是函数还是class声明一个组件，这个组件都必须像纯函数一样，<code>保护它们的props不被修改</code></p>
<h3 id="核心概念"><a href="#核心概念" class="headerlink" title="核心概念"></a>核心概念</h3><h3 id="action"><a href="#action" class="headerlink" title="action"></a>action</h3><p>数据的变化是通过action来进行更新，action来描述这次更新的type和content</p>
<p><img src="C:\Users\mm\AppData\Roaming\Typora\typora-user-images\image-20231004181316074.png" alt="image-20231004181316074"></p>
<h3 id="reducer"><a href="#reducer" class="headerlink" title="reducer"></a>reducer</h3><p>作用：将state和action联系在一起，将传入的state和action返回一个新的state</p>
<h4 id="创建store"><a href="#创建store" class="headerlink" title="创建store"></a>创建store</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//store/index.js</span></span><br><span class="line"><span class="keyword">const</span> &#123; createStore &#125; = <span class="built_in">require</span>(<span class="string">&#x27;redux&#x27;</span>)</span><br><span class="line"><span class="comment">//初始化数据</span></span><br><span class="line"><span class="keyword">const</span> initialState = &#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&#x27;小明&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>:<span class="number">100</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//定义reducer函数:纯函数</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">reducer</span>(<span class="params">state = initialState,action</span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>(action.<span class="property">type</span> === <span class="string">&#x27;change_name&#x27;</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;...state,<span class="attr">name</span>:action.<span class="property">name</span>&#125;</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(action.<span class="property">type</span> === <span class="string">&#x27;change_age&#x27;</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;...state,<span class="attr">age</span>:action.<span class="property">age</span> + state.<span class="property">age</span>&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//返回的是新的数据</span></span><br><span class="line">    <span class="keyword">return</span> state</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//创建的仓库</span></span><br><span class="line"><span class="keyword">const</span> store = <span class="title function_">createStore</span>(reducer)</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = store</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//使用redux里面的数据</span></span><br><span class="line"><span class="keyword">const</span> store = <span class="built_in">require</span>(<span class="string">&#x27;./store/index&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(store.<span class="title function_">getState</span>())</span><br><span class="line"><span class="comment">//修改redux里面的数据:使用action</span></span><br><span class="line"><span class="keyword">const</span> nameAction = &#123;<span class="attr">type</span>:<span class="string">&#x27;change_name&#x27;</span>,<span class="attr">name</span>:<span class="string">&#x27;kobe&#x27;</span>&#125;</span><br><span class="line">store.<span class="title function_">dispatch</span>(nameAction)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(store.<span class="title function_">getState</span>())</span><br><span class="line"><span class="comment">//修改年龄</span></span><br><span class="line"><span class="keyword">const</span> ageAction = &#123;<span class="attr">type</span>:<span class="string">&#x27;change_age&#x27;</span>,<span class="attr">age</span>:<span class="number">10</span>&#125;</span><br><span class="line">store.<span class="title function_">dispatch</span>(ageAction)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(store.<span class="title function_">getState</span>())</span><br></pre></td></tr></table></figure>

<p>代码优化</p>
<ol>
<li><p>将action生成过程放在了函数里面</p>
</li>
<li><p>将定义的函数放在了store&#x2F;actionCreators.js</p>
</li>
<li><p>actionCreators.js和reducer.js使用的字符串是一样的，所以抽取为了一个store&#x2F;constants.js</p>
</li>
<li><p>将reducer函数封装在了一个reducer.js文件中</p>
</li>
<li><p>index.js创建仓库</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//actionCreators.js</span></span><br><span class="line"><span class="keyword">const</span> &#123;<span class="variable constant_">CHANGE_AGE</span>, <span class="variable constant_">CHANGE_NAME</span>&#125; = <span class="built_in">require</span>(<span class="string">&quot;./constant&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">changeNameAction</span> = (<span class="params">name</span>)=&gt;&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;<span class="attr">type</span>:<span class="variable constant_">CHANGE_NAME</span>,name&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">addNumAction</span> = (<span class="params">age</span>)=&gt;&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;<span class="attr">type</span>:<span class="variable constant_">CHANGE_AGE</span>,age&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    changeNameAction,</span><br><span class="line">    addNumAction</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//constant.js</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">CHANGE_NAME</span> = <span class="string">&#x27;change_name&#x27;</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">CHANGE_AGE</span> = <span class="string">&#x27;change_age&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="variable constant_">CHANGE_AGE</span>,</span><br><span class="line">    <span class="variable constant_">CHANGE_NAME</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//index.js</span></span><br><span class="line"><span class="keyword">const</span> &#123;createStore&#125; = <span class="built_in">require</span>(<span class="string">&#x27;redux&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> reducer = <span class="built_in">require</span>(<span class="string">&#x27;./reducer&#x27;</span>)</span><br><span class="line"><span class="comment">//创建的仓库</span></span><br><span class="line"><span class="keyword">const</span> store = <span class="title function_">createStore</span>(reducer)</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = store</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//reducer.js</span></span><br><span class="line"><span class="keyword">const</span> &#123;<span class="variable constant_">CHANGE_NAME</span>, <span class="variable constant_">CHANGE_AGE</span>&#125; = <span class="built_in">require</span>(<span class="string">&quot;./constant&quot;</span>);</span><br><span class="line"><span class="comment">//初始化数据</span></span><br><span class="line"><span class="keyword">const</span> initialState = &#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&#x27;小明&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>:<span class="number">100</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//定义reducer函数:纯函数</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">reducer</span>(<span class="params">state = initialState,action</span>)&#123;</span><br><span class="line">    <span class="keyword">switch</span> (action.<span class="property">type</span>)&#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="attr">CHANGE_NAME</span>:</span><br><span class="line">            <span class="keyword">return</span> &#123;...state,<span class="attr">name</span>:action.<span class="property">name</span>&#125;</span><br><span class="line">        <span class="keyword">case</span> <span class="attr">CHANGE_AGE</span>:</span><br><span class="line">            <span class="keyword">return</span> &#123;...state,<span class="attr">age</span>:action.<span class="property">age</span> + state.<span class="property">age</span>&#125;</span><br><span class="line">        <span class="attr">default</span>:</span><br><span class="line">            <span class="keyword">return</span> state</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = reducer</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//使用redux</span></span><br><span class="line"><span class="keyword">const</span> store = <span class="built_in">require</span>(<span class="string">&#x27;./store/index&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> &#123;addNumAction,changeNameAction&#125; = <span class="built_in">require</span>(<span class="string">&#x27;./store/actionCreators&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> unsubscribe = store.<span class="title function_">subscribe</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;订阅数据变化&quot;</span>,store.<span class="title function_">getState</span>())</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">store.<span class="title function_">dispatch</span>(<span class="title function_">changeNameAction</span>(<span class="string">&#x27;kobe&#x27;</span>))</span><br><span class="line">store.<span class="title function_">dispatch</span>(<span class="title function_">changeNameAction</span>(<span class="string">&#x27;hello&#x27;</span>))</span><br><span class="line">store.<span class="title function_">dispatch</span>(<span class="title function_">changeNameAction</span>(<span class="string">&#x27;ymj&#x27;</span>))</span><br><span class="line">store.<span class="title function_">dispatch</span>(<span class="title function_">addNumAction</span>(<span class="number">10</span>))</span><br><span class="line">store.<span class="title function_">dispatch</span>(<span class="title function_">addNumAction</span>(<span class="number">20</span>))</span><br><span class="line">store.<span class="title function_">dispatch</span>(<span class="title function_">addNumAction</span>(<span class="number">100</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">//取消订阅</span></span><br><span class="line"><span class="title function_">unsubscribe</span>()</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h4 id="redux三大原则"><a href="#redux三大原则" class="headerlink" title="redux三大原则"></a>redux三大原则</h4><ol>
<li><p>只有一个store</p>
</li>
<li><p>state是只读的，只能通过action来进行修改，便于集中处理</p>
</li>
<li><p>使用纯函数修改</p>
<p>![Screenshot_2023-10-04-19-46-43-84_846b44643ec609f](C:\Users\mm\Documents\Tencent Files\3495314473\FileRecv\MobileFile\Screenshot_2023-10-04-19-46-43-84_846b44643ec609f.jpg)</p>
</li>
</ol>
</li>
</ol>
<p><img src="C:\Users\mm\AppData\Roaming\Typora\typora-user-images\image-20231004195245697.png" alt="image-20231004195245697"></p>
<p><strong>拓展</strong></p>
<p>node对es6模块化的支持</p>
<p>在package.json中添加属性:”type”:”module”</p>
<p><em><strong>导入文件时，要加上js后缀</strong></em></p>
<h3 id="react-redux的使用"><a href="#react-redux的使用" class="headerlink" title="react-redux的使用"></a>react-redux的使用</h3><blockquote>
<p>它提供了Provider和connect简化了代码的书写，它封装了许多步骤。</p>
<p>connect将redux里面的state映射到组件里的props,dispatch也映射到props</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//在组件里面的使用redux里面的内容，</span></span><br><span class="line"><span class="comment">//将仓库里的state映射出来</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">mapStateToProps</span> = (<span class="params">state</span>)=&gt;(</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">counter</span>:state.<span class="property">counter</span>,</span><br><span class="line">        <span class="attr">banner</span>:state.<span class="property">banner</span>,</span><br><span class="line">        <span class="attr">recommend</span>:state.<span class="property">recommend</span></span><br><span class="line">    &#125;</span><br><span class="line">)</span><br><span class="line"><span class="comment">//将dispatch映射出来</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">mapDispatchToProps</span> = (<span class="params">dispatch</span>)=&gt;(&#123;</span><br><span class="line">    <span class="title function_">addNumber</span>(<span class="params">num</span>)&#123;</span><br><span class="line">        <span class="title function_">dispatch</span>(<span class="title function_">addNumberAction</span>(num))</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">descNumber</span>(<span class="params">num</span>)&#123;</span><br><span class="line">        <span class="title function_">dispatch</span>(<span class="title function_">subNumberAction</span>(num))</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">connect</span>(mapStateToProps,mapDispatchToProps)(<span class="title class_">About</span>);</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//index.js提供是哪个store</span></span><br><span class="line">root.<span class="title function_">render</span>(</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">Provider</span> <span class="attr">store</span>=<span class="string">&#123;store&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">App</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">Provider</span>&gt;</span></span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>



<ol>
<li>下载npm i react-redux</li>
<li>如上面的代码书写</li>
</ol>
<h4 id="异步操作"><a href="#异步操作" class="headerlink" title="异步操作"></a>异步操作</h4><blockquote>
<p>网络请求到的数据也属于我们状态管理的一部分，更好的一种方式应该是将其也交给redux来管理</p>
</blockquote>
<p><code>npm i redux-thunk</code></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//actionCreater.js</span></span><br><span class="line"><span class="comment">//请求异步数据</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">fetchHomeMultidataAction</span> = (<span class="params"></span>)=&gt;&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span>(<span class="params">dispatch,getState</span>)&#123;</span><br><span class="line">      axios.<span class="title function_">get</span>(<span class="string">&quot;http://123.207.32.32:8000/home/multidata&quot;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> banner = res.<span class="property">data</span>.<span class="property">data</span>.<span class="property">banner</span>.<span class="property">list</span></span><br><span class="line">      <span class="keyword">const</span> recommend = res.<span class="property">data</span>.<span class="property">data</span>.<span class="property">recommend</span>.<span class="property">list</span></span><br><span class="line">        </span><br><span class="line">      <span class="title function_">dispatch</span>(<span class="title function_">changeBannerAction</span>(banner))</span><br><span class="line">      <span class="title function_">dispatch</span>(<span class="title function_">changeRecommendAction</span>(recommend))</span><br><span class="line">    &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>其中dispatch一般派发的是js对象，但是可以使用react-thunk来派发函数</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//让dispatch派发函数，一般是派发的是对象</span></span><br><span class="line"><span class="keyword">import</span> thunk <span class="keyword">from</span> <span class="string">&#x27;redux-thunk&#x27;</span></span><br><span class="line"><span class="keyword">const</span> store = <span class="title function_">createStore</span>(reducer,<span class="title function_">composeEnhancers</span>(<span class="title function_">applyMiddleware</span>(thunk)))</span><br></pre></td></tr></table></figure>

<h3 id="React工具（devtools）"><a href="#React工具（devtools）" class="headerlink" title="React工具（devtools）"></a>React工具（devtools）</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//在导出仓库的时候使用redux-devtools</span></span><br><span class="line"><span class="keyword">import</span> &#123;applyMiddleware, compose, createStore&#125; <span class="keyword">from</span> <span class="string">&quot;redux&quot;</span>;</span><br><span class="line"><span class="comment">//redux-devtools</span></span><br><span class="line"><span class="keyword">const</span> composeEnhancers =  <span class="variable language_">window</span>.<span class="title function_">__REDUX_DEVTOOLS_EXTENSION_COMPOSE__</span>(&#123;<span class="attr">trace</span>: <span class="literal">true</span>&#125;) || compose;</span><br></pre></td></tr></table></figure>

<h3 id="Reducer的拆分"><a href="#Reducer的拆分" class="headerlink" title="Reducer的拆分"></a>Reducer的拆分</h3><blockquote>
<p>为什么拆分</p>
<p>因为每一个组件可能有自己的逻辑，业务也会很复杂，所以为了区分将他们进行拆分</p>
</blockquote>
<ol>
<li><p>我们先抽取一个对counter处理的reducer；</p>
</li>
<li><p>再抽取一个对home处理的reducer；</p>
</li>
<li><p>将它们合并起来（使用combineReducers）；</p>
</li>
</ol>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//counter文件夹里面是原来的store里面的内容</span></span><br><span class="line"><span class="comment">//home文件夹里是原来的store里面的内容</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//store/index.js</span></span><br><span class="line"><span class="comment">//在导出仓库的时候使用redux-devtools</span></span><br><span class="line"><span class="keyword">import</span> &#123;applyMiddleware, compose, createStore&#125; <span class="keyword">from</span> <span class="string">&quot;redux&quot;</span>;</span><br><span class="line"><span class="comment">//让dispatch派发函数，一般是派发的是对象</span></span><br><span class="line"><span class="keyword">import</span> thunk <span class="keyword">from</span> <span class="string">&#x27;redux-thunk&#x27;</span></span><br><span class="line"><span class="keyword">import</span> counterReducer <span class="keyword">from</span><span class="string">&#x27;./counter/index&#x27;</span></span><br><span class="line"><span class="keyword">import</span> homeReducer <span class="keyword">from</span> <span class="string">&#x27;./home/index&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; combineReducers &#125; <span class="keyword">from</span> <span class="string">&quot;redux&quot;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> reducer = <span class="title function_">combineReducers</span>(&#123;</span><br><span class="line">    <span class="attr">home</span>:homeReducer,</span><br><span class="line">    <span class="attr">count</span>:counterReducer</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//redux-devtools</span></span><br><span class="line"><span class="keyword">const</span> composeEnhancers =  <span class="variable language_">window</span>.<span class="title function_">__REDUX_DEVTOOLS_EXTENSION_COMPOSE__</span>(&#123;<span class="attr">trace</span>: <span class="literal">true</span>&#125;) || compose;</span><br><span class="line"><span class="comment">//让dispatch派发函数，一般是派发的是对象</span></span><br><span class="line"><span class="keyword">const</span> store = <span class="title function_">createStore</span>(reducer,<span class="title function_">composeEnhancers</span>(<span class="title function_">applyMiddleware</span>(thunk)))</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store</span><br></pre></td></tr></table></figure>



<h2 id="ReduxToolkit-的使用（也是以前redux的简化"><a href="#ReduxToolkit-的使用（也是以前redux的简化" class="headerlink" title="ReduxToolkit 的使用（也是以前redux的简化)"></a><strong>ReduxToolkit</strong> 的使用（也是以前redux的简化)</h2><h3 id="基本使用-2"><a href="#基本使用-2" class="headerlink" title="基本使用"></a>基本使用</h3><blockquote>
<p>其中核心的api为：configureStore，createSlice，createAsyncThunk</p>
</blockquote>
<h5 id="configureStore"><a href="#configureStore" class="headerlink" title="configureStore"></a>configureStore</h5><p>作用：包装createStore以提供简化的配置选项和良好的默认值。它可以自动<code>组合你的 slice reducer</code>，添加你提供</p>
<p>的<code>任何 Redux 中间件</code>，<code>redux-thunk</code>默认包含，并启用<code> Redux DevTools Extension</code>。</p>
<h5 id="createSlice-如下面的代码"><a href="#createSlice-如下面的代码" class="headerlink" title="createSlice(如下面的代码)"></a>createSlice(如下面的代码)</h5><p>作用：接受reducer函数的对象、切片名称和初始状态值，并自动生成<code>切片reducer</code>，并带有相应的<code>actions</code>。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="createAsyncThunk（进行异步操作）"><a href="#createAsyncThunk（进行异步操作）" class="headerlink" title="createAsyncThunk（进行异步操作）"></a>createAsyncThunk（进行异步操作）</h5><h3 id="redux里面代码"><a href="#redux里面代码" class="headerlink" title="redux里面代码"></a>redux里面代码</h3><h4 id="创建切片"><a href="#创建切片" class="headerlink" title="创建切片"></a>创建切片</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//count.js</span></span><br><span class="line"><span class="keyword">import</span> &#123;createSlice&#125; <span class="keyword">from</span> <span class="string">&#x27;@reduxjs/toolkit&#x27;</span></span><br><span class="line"><span class="keyword">const</span> createCounterSlice = <span class="title function_">createSlice</span>(&#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&quot;counter&quot;</span>,</span><br><span class="line">    <span class="attr">initialState</span>:&#123;</span><br><span class="line">        <span class="attr">counter</span>:<span class="number">100</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">reducers</span>:&#123;</span><br><span class="line">        <span class="title function_">addNumberAction</span>(<span class="params">state,&#123;payload&#125;</span>)&#123;</span><br><span class="line">            state.<span class="property">counter</span> += payload</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="title function_">subNumberAction</span>(<span class="params">state,&#123;payload&#125;</span>)&#123;</span><br><span class="line">            state.<span class="property">counter</span> -= payload</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> &#123;addNumberAction,subNumberAction&#125; = createCounterSlice.<span class="property">actions</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> createCounterSlice.<span class="property">reducer</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//home.js</span></span><br><span class="line"><span class="keyword">import</span> &#123;createSlice&#125; <span class="keyword">from</span> <span class="string">&#x27;@reduxjs/toolkit&#x27;</span></span><br><span class="line"><span class="keyword">const</span> createHomeSlice = <span class="title function_">createSlice</span>(&#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&quot;counter&quot;</span>,</span><br><span class="line">    <span class="attr">initialState</span>:&#123;</span><br><span class="line">        <span class="attr">banner</span>:[],</span><br><span class="line">        <span class="attr">recommend</span>:[]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">reducers</span>:&#123;</span><br><span class="line">        <span class="title function_">changeBannerAction</span>(<span class="params">state,&#123;payload&#125;</span>)&#123;</span><br><span class="line">            state.<span class="property">counter</span> += payload</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="title function_">changeRecoomendAction</span>(<span class="params">state,&#123;payload&#125;</span>)&#123;</span><br><span class="line">            state.<span class="property">counter</span> -= payload</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> &#123;changeBannerAction,changeRecoomendAction&#125; = createHomeSlice.<span class="property">actions</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> createHomeSlice.<span class="property">reducer</span></span><br></pre></td></tr></table></figure>



<h4 id="创建store-1"><a href="#创建store-1" class="headerlink" title="创建store"></a>创建store</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;configureStore&#125; <span class="keyword">from</span> <span class="string">&#x27;@reduxjs/toolkit&#x27;</span></span><br><span class="line"><span class="keyword">import</span> homeReducer <span class="keyword">from</span> <span class="string">&#x27;./features/home&#x27;</span></span><br><span class="line"><span class="keyword">import</span> counterReducer <span class="keyword">from</span> <span class="string">&#x27;./features/counter&#x27;</span></span><br><span class="line"><span class="keyword">const</span> store = <span class="title function_">configureStore</span>(&#123;</span><br><span class="line">    <span class="attr">reducer</span>:&#123;</span><br><span class="line">        <span class="attr">home</span>:homeReducer,</span><br><span class="line">        <span class="attr">count</span>:counterReducer</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store</span><br></pre></td></tr></table></figure>



<h4 id="extraReducer"><a href="#extraReducer" class="headerlink" title="extraReducer"></a><strong>extraReducer</strong></h4><blockquote>
<p>被创建的extraReducer中含有三个状态:pending,fulfilled,rejected</p>
<p>监听请求的过程</p>
</blockquote>
<h5 id="第一种写法"><a href="#第一种写法" class="headerlink" title="第一种写法"></a>第一种写法</h5><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;createSlice,createAsyncThunk&#125; <span class="keyword">from</span> <span class="string">&#x27;@reduxjs/toolkit&#x27;</span></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="comment">//异步请求 </span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> fetchHomeMultidataAction = <span class="title function_">createAsyncThunk</span>(<span class="string">&quot;fetch/homemultidata&quot;</span>,<span class="title function_">async</span>(extraInfo,&#123;dispatch,getState&#125;)=&gt;&#123;</span><br><span class="line">    <span class="comment">//1.发起请求</span></span><br><span class="line">    <span class="keyword">const</span> res = <span class="keyword">await</span> axios.<span class="title function_">get</span>(<span class="string">&quot;http://123.207.32.32:8000/home/multidata&quot;</span>)</span><br><span class="line">    <span class="keyword">const</span> banners = res.<span class="property">data</span>.<span class="property">data</span>.<span class="property">banner</span>.<span class="property">list</span></span><br><span class="line">    <span class="keyword">const</span> recommends = res.<span class="property">data</span>.<span class="property">data</span>.<span class="property">recommend</span>.<span class="property">list</span></span><br><span class="line">    <span class="comment">//2.派发数据，进行修改数据</span></span><br><span class="line">    <span class="title function_">dispatch</span>(<span class="title function_">changeBannerAction</span>(banners))</span><br><span class="line">    <span class="title function_">dispatch</span>(<span class="title function_">changeRecomendAction</span>(recommends))</span><br><span class="line">    <span class="comment">// 3.返回结果, 那么action状态会变成fulfilled状态</span></span><br><span class="line">    <span class="keyword">return</span> res.<span class="property">data</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">const</span> createHomeSlice = <span class="title function_">createSlice</span>(&#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&quot;counter&quot;</span>,</span><br><span class="line">    <span class="attr">initialState</span>:&#123;</span><br><span class="line">        <span class="attr">banner</span>:[],</span><br><span class="line">        <span class="attr">recommend</span>:[]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">reducers</span>:&#123;</span><br><span class="line">        <span class="title function_">changeBannerAction</span>(<span class="params">state,&#123;payload&#125;</span>)&#123;</span><br><span class="line">            state.<span class="property">banner</span> = payload</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="title function_">changeRecomendAction</span>(<span class="params">state,&#123;payload&#125;</span>)&#123;</span><br><span class="line">            state.<span class="property">recommend</span> = payload</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//进行监听,在createSlice的entraReducer中监听这些结果</span></span><br><span class="line">     <span class="attr">extraReducers</span>:&#123;</span><br><span class="line">        [fetchHomeMultidataAction.<span class="property">pending</span>](state,action)&#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;程序进行中&quot;</span>);</span><br><span class="line">        &#125;,</span><br><span class="line">        [fetchHomeMultidataAction.<span class="property">fulfilled</span>](state,&#123;payload&#125;)&#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;获取到了数据&quot;</span>,payload);</span><br><span class="line">            state.<span class="property">banner</span> = payload.<span class="property">data</span>.<span class="property">banner</span>.<span class="property">list</span></span><br><span class="line">            state.<span class="property">recommend</span> = payload.<span class="property">data</span>.<span class="property">recommend</span>.<span class="property">list</span></span><br><span class="line">        &#125;,</span><br><span class="line">        [fetchHomeMultidataAction.<span class="property">rejected</span>](state,action)&#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> &#123;changeBannerAction,changeRecomendAction&#125; = createHomeSlice.<span class="property">actions</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> createHomeSlice.<span class="property">reducer</span></span><br></pre></td></tr></table></figure>

<h2 id="State状态管理"><a href="#State状态管理" class="headerlink" title="State状态管理"></a>State状态管理</h2><blockquote>
<p> 方式一：组件中自己的state管理；</p>
<p> 方式二：Context数据的共享状态；</p>
<p> 方式三：Redux管理应用状态；</p>
</blockquote>
<p>状态管理方式</p>
<ol>
<li>ui类的在自己组件进行管理</li>
<li>大部分需要共享的状态，都交给redux来管理和维护；</li>
<li>网络请求的，交给redux来维护和管理</li>
</ol>
<h2 id="React-Router使用"><a href="#React-Router使用" class="headerlink" title="React Router使用"></a>React Router使用</h2><h3 id="基本使用-3"><a href="#基本使用-3" class="headerlink" title="基本使用"></a>基本使用</h3><p>路由的配置，嵌套路由</p>
<ol>
<li><code>npm install react-router-dom</code>   (千万不要下载错，不要下载为react-router)</li>
<li></li>
</ol>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//app.jsx</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Home</span> <span class="keyword">from</span> <span class="string">&quot;./pages/home&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">Link</span>, <span class="title class_">Navigate</span>, <span class="title class_">Route</span>, <span class="title class_">Routes</span>,<span class="title class_">NavLink</span>&#125; <span class="keyword">from</span> <span class="string">&quot;react-router-dom&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">About</span> <span class="keyword">from</span> <span class="string">&quot;./pages/about&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Login</span> <span class="keyword">from</span> <span class="string">&quot;./pages/login&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./App.css&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123;<span class="title class_">PureComponent</span>&#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">NotFound</span> <span class="keyword">from</span> <span class="string">&quot;./pages/NotFound&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Homerecommend</span> <span class="keyword">from</span> <span class="string">&quot;./pages/homerecommend&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Homeranking</span> <span class="keyword">from</span> <span class="string">&quot;./pages/homeranking&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">App</span> <span class="keyword">extends</span> <span class="title class_ inherited__">PureComponent</span> &#123;</span><br><span class="line">    <span class="comment">// getClassNameActive(&#123;isActive&#125;)&#123;</span></span><br><span class="line">    <span class="comment">//     return classNames(&#123;&#x27;link-active&#x27;:isActive&#125;)</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">     <span class="keyword">return</span>(</span><br><span class="line">         <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;App&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">             <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#x27;header&#x27;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                 <span class="tag">&lt;<span class="name">h2</span>&gt;</span>我是头部<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                 <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#x27;navigator&#x27;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                     <span class="tag">&lt;<span class="name">NavLink</span> <span class="attr">to</span>=<span class="string">&#x27;/&#x27;</span> <span class="attr">style</span>=<span class="string">&#123;(&#123;isActive&#125;)</span>=&gt;</span>(&#123;color:isActive?&#x27;red&#x27;:&#x27;&#x27;&#125;)&#125;&gt;首页<span class="tag">&lt;/<span class="name">NavLink</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                     <span class="tag">&lt;<span class="name">NavLink</span> <span class="attr">to</span>=<span class="string">&#x27;/about&#x27;</span> <span class="attr">style</span>=<span class="string">&#123;(&#123;isActive&#125;)</span>=&gt;</span>(&#123;color:isActive?&#x27;red&#x27;:&#x27;&#x27;&#125;)&#125;&gt;关于<span class="tag">&lt;/<span class="name">NavLink</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                     <span class="tag">&lt;<span class="name">NavLink</span> <span class="attr">to</span>=<span class="string">&#x27;/login&#x27;</span> <span class="attr">style</span>=<span class="string">&#123;(&#123;isActive&#125;)</span>=&gt;</span>(&#123;color:isActive?&#x27;red&#x27;:&#x27;&#x27;&#125;)&#125;&gt;登录<span class="tag">&lt;/<span class="name">NavLink</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                 <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                 <span class="tag">&lt;<span class="name">hr</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml">             <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">             <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#x27;content&#x27;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                 <span class="tag">&lt;<span class="name">Routes</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                   <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&#x27;/&#x27;</span> <span class="attr">element</span>=<span class="string">&#123;</span>&lt;<span class="attr">Navigate</span> <span class="attr">to</span>=<span class="string">&#x27;/home&#x27;</span>/&gt;</span>&#125; /&gt;</span></span><br><span class="line"><span class="language-xml">                       //嵌套路由</span></span><br><span class="line"><span class="language-xml">                   <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&#x27;/home&#x27;</span> <span class="attr">element</span>=<span class="string">&#123;</span>&lt;<span class="attr">Home</span>/&gt;</span>&#125; &gt;</span></span><br><span class="line"><span class="language-xml">                       <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&#x27;/home&#x27;</span> <span class="attr">element</span>=<span class="string">&#123;</span>&lt;<span class="attr">Navigate</span> <span class="attr">to</span>=<span class="string">&quot;/home/recommend&quot;</span>/&gt;</span>&#125;/&gt;</span></span><br><span class="line"><span class="language-xml">                       <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&#x27;/home/recommend&#x27;</span> <span class="attr">element</span>=<span class="string">&#123;</span>&lt;<span class="attr">Homerecommend</span>/&gt;</span>&#125;&gt;<span class="tag">&lt;/<span class="name">Route</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                       <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&#x27;/home/ranking&#x27;</span> <span class="attr">element</span>=<span class="string">&#123;</span>&lt;<span class="attr">Homeranking</span>/&gt;</span>&#125;&gt;<span class="tag">&lt;/<span class="name">Route</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">                   <span class="tag">&lt;/<span class="name">Route</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                   <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&#x27;/about&#x27;</span> <span class="attr">element</span>=<span class="string">&#123;</span>&lt;<span class="attr">About</span>/&gt;</span>&#125; /&gt;</span></span><br><span class="line"><span class="language-xml">                   <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&#x27;/login&#x27;</span> <span class="attr">element</span>=<span class="string">&#123;</span>&lt;<span class="attr">Login</span>/&gt;</span>&#125; /&gt;</span></span><br><span class="line"><span class="language-xml">                     <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&#x27;*&#x27;</span> <span class="attr">element</span>=<span class="string">&#123;</span>&lt;<span class="attr">NotFound</span>/&gt;</span>&#125;&gt;<span class="tag">&lt;/<span class="name">Route</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                 <span class="tag">&lt;/<span class="name">Routes</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                 <span class="tag">&lt;<span class="name">hr</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml">             <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">             <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#x27;footer&#x27;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                 我是底部</span></span><br><span class="line"><span class="language-xml">             <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">         <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">     )</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>在这个里面添加<code>&lt;Outlet/&gt;</code>来进行占位</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//home.jsx</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123;<span class="title class_">PureComponent</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">Outlet</span>&#125; <span class="keyword">from</span> <span class="string">&quot;react-router-dom&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">Link</span>&#125; <span class="keyword">from</span> <span class="string">&quot;react-router-dom&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Home</span> <span class="keyword">extends</span> <span class="title class_ inherited__">PureComponent</span> &#123;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>我是home页面<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>歌曲推荐页面<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">&#x27;/home/recommend&#x27;</span>&gt;</span>推荐<span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">&#x27;/home/ranking&#x27;</span>&gt;</span>排行榜<span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">Outlet</span>&gt;</span><span class="tag">&lt;/<span class="name">Outlet</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Home</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="手动实现路由跳转"><a href="#手动实现路由跳转" class="headerlink" title="手动实现路由跳转"></a>手动实现路由跳转</h3><p>使用useNavigate()来进行路由跳转</p>
<p>这个分为两种情况</p>
<ol>
<li><p>函数式组件</p>
<p>可以直接使用useNavigate()来进行路由跳转</p>
</li>
<li><p>类组件</p>
<p>在类组件里面不能使用hooks，所以可以使用高阶组件来进行对<code>组件的拦截</code>,给它添加一些hooks上面的对象</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//高阶组件的一个封装</span></span><br><span class="line"><span class="keyword">import</span> &#123;useNavigate&#125; <span class="keyword">from</span> <span class="string">&quot;react-router-dom&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">widthRouter</span>(<span class="params">WrapperComponent</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params">props</span>)&#123;</span><br><span class="line">        <span class="comment">//1.导航</span></span><br><span class="line">        <span class="keyword">const</span> navigate = <span class="title function_">useNavigate</span>()</span><br><span class="line">        <span class="keyword">const</span> router = &#123;navigate&#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">WrapperComponent</span> &#123;<span class="attr">...props</span>&#125; <span class="attr">router</span>=<span class="string">&#123;router&#125;</span>&gt;</span><span class="tag">&lt;/<span class="name">WrapperComponent</span>&gt;</span></span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> widthRouter;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//button的路由跳转</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123;<span class="title class_">PureComponent</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">Outlet</span>&#125; <span class="keyword">from</span> <span class="string">&quot;react-router-dom&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">Link</span>&#125; <span class="keyword">from</span> <span class="string">&quot;react-router-dom&quot;</span></span><br><span class="line"><span class="keyword">import</span> widthRouter <span class="keyword">from</span> <span class="string">&quot;../hoc/with_router&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Home</span> <span class="keyword">extends</span> <span class="title class_ inherited__">PureComponent</span> &#123;</span><br><span class="line">    <span class="title function_">navigateTo</span>(<span class="params">path</span>)&#123;</span><br><span class="line">        <span class="keyword">const</span> &#123;navigate&#125; = <span class="variable language_">this</span>.<span class="property">props</span>.<span class="property">router</span></span><br><span class="line">        <span class="title function_">navigate</span>(path)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>我是home页面<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>歌曲推荐页面<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">&#x27;/home/recommend&#x27;</span>&gt;</span>推荐<span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">&#x27;/home/ranking&#x27;</span>&gt;</span>排行榜<span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;e</span>=&gt;</span>this.navigateTo(&quot;/home/songmenu&quot;)&#125;&gt;跳到歌单页面<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">Outlet</span>&gt;</span><span class="tag">&lt;/<span class="name">Outlet</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">widthRouter</span>(<span class="title class_">Home</span>);</span><br></pre></td></tr></table></figure>

<h3 id="路由参数传递"><a href="#路由参数传递" class="headerlink" title="路由参数传递"></a>路由参数传递</h3><ol>
<li><p>动态路由</p>
<p>&#x2F;detail&#x2F;:id，那么 &#x2F;detail&#x2F;abc、&#x2F;detail&#x2F;123都可以匹配到该Route，并且进行显示，这就是动态路由</p>
</li>
<li><p>search传递参数</p>
</li>
</ol>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123;<span class="title class_">PureComponent</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">Outlet</span>&#125; <span class="keyword">from</span> <span class="string">&quot;react-router-dom&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">Link</span>&#125; <span class="keyword">from</span> <span class="string">&quot;react-router-dom&quot;</span></span><br><span class="line"><span class="keyword">import</span> widthRouter <span class="keyword">from</span> <span class="string">&quot;../hoc/with_router&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Home</span> <span class="keyword">extends</span> <span class="title class_ inherited__">PureComponent</span> &#123;</span><br><span class="line">    <span class="title function_">navigateTo</span>(<span class="params">path</span>)&#123;</span><br><span class="line">       <span class="keyword">const</span> &#123;navigate&#125; = <span class="variable language_">this</span>.<span class="property">props</span>.<span class="property">router</span></span><br><span class="line">        <span class="title function_">navigate</span>(path)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123;param,query&#125; = <span class="variable language_">this</span>.<span class="property">props</span>.<span class="property">router</span></span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>我是home页面<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>歌曲推荐页面<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">&#x27;/home/recommend&#x27;</span>&gt;</span>推荐<span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">&#x27;/home/ranking&#x27;</span>&gt;</span>排行榜<span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            		//路由传递参数和查询字符串</span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">&quot;/home/123?name=&#x27;小明&#x27;&amp;age=18&quot;</span>&gt;</span>hello<span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>这是&#123;param.id&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>查询的字符串为&#123;query.name&#125;&#123;query.age&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;e</span>=&gt;</span>this.navigateTo(&quot;/home/songmenu&quot;)&#125;&gt;跳到歌单页面<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">Outlet</span>&gt;</span><span class="tag">&lt;/<span class="name">Outlet</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">widthRouter</span>(<span class="title class_">Home</span>);</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//高阶组件的封装</span></span><br><span class="line"><span class="keyword">import</span> &#123;useNavigate, useSearchParams&#125; <span class="keyword">from</span> <span class="string">&quot;react-router-dom&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;useParams&#125; <span class="keyword">from</span> <span class="string">&quot;react-router-dom&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">widthRouter</span>(<span class="params">WrapperComponent</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params">props</span>)&#123;</span><br><span class="line">        <span class="comment">//1.导航</span></span><br><span class="line">        <span class="keyword">const</span> navigate = <span class="title function_">useNavigate</span>()</span><br><span class="line">        <span class="comment">//2.动态路由的参数</span></span><br><span class="line">        <span class="keyword">const</span> param = <span class="title function_">useParams</span>()</span><br><span class="line">        <span class="comment">//3.查询字符串</span></span><br><span class="line">        <span class="keyword">const</span> [searchParams] = <span class="title function_">useSearchParams</span>()</span><br><span class="line">        <span class="keyword">const</span> query = <span class="title class_">Object</span>.<span class="title function_">fromEntries</span>(searchParams)</span><br><span class="line">        <span class="keyword">const</span> router = &#123;navigate,param,query&#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">WrapperComponent</span> &#123;<span class="attr">...props</span>&#125; <span class="attr">router</span>=<span class="string">&#123;router&#125;</span>&gt;</span><span class="tag">&lt;/<span class="name">WrapperComponent</span>&gt;</span></span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> widthRouter;</span><br></pre></td></tr></table></figure>



<h3 id="对router配置文件的优化"><a href="#对router配置文件的优化" class="headerlink" title="对router配置文件的优化"></a>对router配置文件的优化</h3><p>useRoutes API可以完成相关的配置，要配置路由的懒加载需要配合Suspense进行包裹。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//router/index.js</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Home</span> <span class="keyword">from</span> <span class="string">&#x27;../pages/Home&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">HomeRecommend</span> <span class="keyword">from</span> <span class="string">&quot;../pages/HomeRecommend&quot;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">HomeRanking</span> <span class="keyword">from</span> <span class="string">&quot;../pages/HomeRanking&quot;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">HomeSongMenu</span> <span class="keyword">from</span> <span class="string">&#x27;../pages/HomeSongMenu&#x27;</span></span><br><span class="line"><span class="comment">// import About from &quot;../pages/About&quot;</span></span><br><span class="line"><span class="comment">// import Login from &quot;../pages/Login&quot;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Category</span> <span class="keyword">from</span> <span class="string">&quot;../pages/Category&quot;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Order</span> <span class="keyword">from</span> <span class="string">&quot;../pages/Order&quot;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">NotFound</span> <span class="keyword">from</span> <span class="string">&#x27;../pages/NotFound&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Detail</span> <span class="keyword">from</span> <span class="string">&#x27;../pages/Detail&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">User</span> <span class="keyword">from</span> <span class="string">&#x27;../pages/User&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Navigate</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react-router-dom&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">About</span> = <span class="title class_">React</span>.<span class="title function_">lazy</span>(<span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&quot;../pages/About&quot;</span>))</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Login</span> = <span class="title class_">React</span>.<span class="title function_">lazy</span>(<span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&quot;../pages/Login&quot;</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;/&quot;</span>,</span><br><span class="line">    <span class="attr">element</span>: <span class="language-xml"><span class="tag">&lt;<span class="name">Navigate</span> <span class="attr">to</span>=<span class="string">&quot;/home&quot;</span>/&gt;</span></span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;/home&quot;</span>,</span><br><span class="line">    <span class="attr">element</span>: <span class="language-xml"><span class="tag">&lt;<span class="name">Home</span>/&gt;</span></span>,</span><br><span class="line">    <span class="attr">children</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&quot;/home&quot;</span>,</span><br><span class="line">        <span class="attr">element</span>: <span class="language-xml"><span class="tag">&lt;<span class="name">Navigate</span> <span class="attr">to</span>=<span class="string">&quot;/home/recommend&quot;</span>/&gt;</span></span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&quot;/home/recommend&quot;</span>,</span><br><span class="line">        <span class="attr">element</span>: <span class="language-xml"><span class="tag">&lt;<span class="name">HomeRecommend</span>/&gt;</span></span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&quot;/home/ranking&quot;</span>,</span><br><span class="line">        <span class="attr">element</span>: <span class="language-xml"><span class="tag">&lt;<span class="name">HomeRanking</span>/&gt;</span></span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&quot;/home/songmenu&quot;</span>,</span><br><span class="line">        <span class="attr">element</span>: <span class="language-xml"><span class="tag">&lt;<span class="name">HomeSongMenu</span>/&gt;</span></span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;/about&quot;</span>,</span><br><span class="line">    <span class="attr">element</span>: <span class="language-xml"><span class="tag">&lt;<span class="name">About</span>/&gt;</span></span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;/login&quot;</span>,</span><br><span class="line">    <span class="attr">element</span>: <span class="language-xml"><span class="tag">&lt;<span class="name">Login</span>/&gt;</span></span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;/category&quot;</span>,</span><br><span class="line">    <span class="attr">element</span>: <span class="language-xml"><span class="tag">&lt;<span class="name">Category</span>/&gt;</span></span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;/order&quot;</span>,</span><br><span class="line">    <span class="attr">element</span>: <span class="language-xml"><span class="tag">&lt;<span class="name">Order</span>/&gt;</span></span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;/detail/:id&quot;</span>,</span><br><span class="line">    <span class="attr">element</span>: <span class="language-xml"><span class="tag">&lt;<span class="name">Detail</span>/&gt;</span></span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;/user&quot;</span>,</span><br><span class="line">    <span class="attr">element</span>: <span class="language-xml"><span class="tag">&lt;<span class="name">User</span>/&gt;</span></span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;*&quot;</span>,</span><br><span class="line">    <span class="attr">element</span>: <span class="language-xml"><span class="tag">&lt;<span class="name">NotFound</span>/&gt;</span></span></span><br><span class="line">  &#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> routes</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//在APP页面使用&#123;useRoutes(routes)&#125;，将路由映射出来</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Link</span>, <span class="title class_">Navigate</span>, <span class="title class_">Route</span>, <span class="title class_">Routes</span>, useNavigate, useRoutes &#125; <span class="keyword">from</span> <span class="string">&#x27;react-router-dom&#x27;</span></span><br><span class="line"><span class="keyword">import</span> routes <span class="keyword">from</span> <span class="string">&#x27;./router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./style.css&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">App</span>(<span class="params">props</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> navigate = <span class="title function_">useNavigate</span>()</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">navigateTo</span>(<span class="params">path</span>) &#123;</span><br><span class="line">    <span class="title function_">navigate</span>(path)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#x27;app&#x27;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#x27;header&#x27;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>header<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#x27;nav&#x27;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">&quot;/home&quot;</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">&quot;/about&quot;</span>&gt;</span>关于<span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">&quot;/login&quot;</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;e</span> =&gt;</span> navigateTo(&quot;/category&quot;)&#125;&gt;分类<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">span</span> <span class="attr">onClick</span>=<span class="string">&#123;e</span> =&gt;</span> navigateTo(&quot;/order&quot;)&#125;&gt;订单<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">&quot;/user?name=why&amp;age=18&quot;</span>&gt;</span>用户<span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">hr</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#x27;content&#x27;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;useRoutes(routes)&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#x27;footer&#x27;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">hr</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        Footer</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//index.js</span></span><br><span class="line"><span class="comment">// import &#123; StrictMode &#125; from &quot;react&quot;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ReactDOM</span> <span class="keyword">from</span> <span class="string">&quot;react-dom/client&quot;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&quot;./App&quot;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">HashRouter</span> &#125; <span class="keyword">from</span> <span class="string">&quot;react-router-dom&quot;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Suspense</span> &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> root = <span class="title class_">ReactDOM</span>.<span class="title function_">createRoot</span>(<span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#root&quot;</span>))</span><br><span class="line">root.<span class="title function_">render</span>(</span><br><span class="line">  <span class="comment">// &lt;StrictMode&gt;</span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">HashRouter</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Suspense</span> <span class="attr">fallback</span>=<span class="string">&#123;</span>&lt;<span class="attr">h3</span>&gt;</span>Loading...<span class="tag">&lt;/<span class="name">h3</span>&gt;</span>&#125;&gt;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">App</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">Suspense</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">HashRouter</span>&gt;</span></span></span><br><span class="line">  <span class="comment">// &lt;/StrictMode&gt;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<h1 id="Hooks"><a href="#Hooks" class="headerlink" title="Hooks"></a>Hooks</h1><p>（这些性质可以看课件）</p>
<h2 id="基本知识"><a href="#基本知识" class="headerlink" title="基本知识"></a>基本知识</h2><blockquote>
<p>使用hooks可以在不使用class组件的前提下，使用hooks里面的state，和class特有的性质（例如生命周期）。</p>
<p>总体来说就是函数式组件可以使用class组件里面的一些特性</p>
</blockquote>
<p>class组件相较于函数式组件的优势</p>
<ol>
<li><p>可定义自己的state</p>
<ol>
<li>函数组件没有state（无状态）</li>
</ol>
</li>
<li><p>有生命周期</p>
<p>1.函数式组件在学习hooks之前，如果在函数中发送网络请求，意味着每次重新渲染都会重新发送一次网络请求</p>
</li>
<li><p>class组件可以在状态改变时只会<code>重新执行render函数</code>以及我们希望<code>重新调用的生命周期函数componentDidUpdate</code>等；</p>
<ol>
<li>但函数组件如果状态改变的话就会重新执行这整个函数</li>
</ol>
</li>
</ol>
<p>class组件的缺点</p>
<ol>
<li>拆分很难</li>
<li>this指向问题</li>
<li>组件复用很难</li>
</ol>
<h2 id="做一个计数器的案例"><a href="#做一个计数器的案例" class="headerlink" title="做一个计数器的案例"></a>做一个计数器的案例</h2><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123;memo, useState&#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">CounterHook</span> () &#123;</span><br><span class="line">    <span class="keyword">const</span> [count, setCount] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">h2</span>&gt;</span>计时器<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">h3</span>&gt;</span>当前计数:&#123;count&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;e</span>=&gt;</span>setCount(count + 1)&#125;&gt;+1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;e</span>=&gt;</span>setCount(count-1)&#125;&gt;-1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">memo</span>(<span class="title class_">CounterHook</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>记住最核心的两个hook：useState，useEffect</p>
<h2 id="useState的使用"><a href="#useState的使用" class="headerlink" title="useState的使用"></a>useState的使用</h2><p>参数：初始化值</p>
<p>返回值：1. 当前状态的值 2. 设置状态值的函数。返回的是一个数组，可以通过解构来完成赋值。</p>
<p>规则：</p>
<ol>
<li>只能在函数最外层调用Hook，不要在循环、条件判断或者子函数里面调用。</li>
<li>只能在react的函数组件中调用Hook，不能在其他的js函数中调用</li>
</ol>
<h2 id="Effect-Hook使用"><a href="#Effect-Hook使用" class="headerlink" title="Effect Hook使用"></a>Effect Hook使用</h2><p>目前可以当做类组件里面的生命周期来使用。</p>
<h3 id="作用"><a href="#作用" class="headerlink" title="作用"></a>作用</h3><blockquote>
<p>完成一些class里面的生命周期，一些产生副作用的函数也可以写在里面</p>
</blockquote>
<p>useEffect是在<code>react需要渲染</code>后执行的某些操作</p>
<ol>
<li>传入一个<code>回调函数</code>，React执行完更新之后会回调</li>
<li>第一次渲染完成，之后更新还会渲染</li>
</ol>
<h3 id="清除Effect"><a href="#清除Effect" class="headerlink" title="清除Effect"></a>清除Effect</h3><p>在useEffect中清除Effect：在useEffect里面<code>传入一个回调</code>的同时它的<code>返回值是另一个回调</code>。</p>
<h3 id="使用多个Effect"><a href="#使用多个Effect" class="headerlink" title="使用多个Effect"></a>使用多个Effect</h3><p>因为useEffect的特性，每一次渲染的时候都会调用回调函数，但是对于一些副作用函数来说不需要每一次都调用，不然会降低性能。</p>
<h4 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h4><p>useEffect实际上有两个参数：</p>
<p>参数一：执行的回调函数；</p>
<p>参数二：该useEffect在哪些state发生变化时，才重新执行；（受谁的影响，依赖于谁的变化）</p>
<p><strong>注意</strong>：<strong>如果一个函数我们不希望依赖任何的内容时，也可以传入一个空的数组 []。</strong></p>
<h2 id="自定义Hook"><a href="#自定义Hook" class="headerlink" title="自定义Hook"></a>自定义Hook</h2><p>很像vue中的函数逻辑抽离，进行复用。</p>
<p>需求一:所有的组件在创建和销毁时都进行打印</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;memo, useEffect, useState&#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">useLogLife</span>(<span class="params">cName</span>)&#123;</span><br><span class="line">    <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(cName+<span class="string">&quot;组件被创建了&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(cName+<span class="string">&quot;组件被销毁了&quot;</span>)</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;, [cName]);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Home</span> = <span class="title function_">memo</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="title function_">useLogLife</span>(<span class="string">&quot;home&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Home Page<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">About</span> = <span class="title function_">memo</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="title function_">useLogLife</span>(<span class="string">&quot;about&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>About Page<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">App1</span> = <span class="title function_">memo</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> [isShow, setIsShow] = <span class="title function_">useState</span>(<span class="literal">false</span>);</span><br><span class="line">    <span class="title function_">useLogLife</span>(<span class="string">&quot;app&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">h1</span>&gt;</span>App Root Component<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;e</span>=&gt;</span>setIsShow(!isShow)&#125;&gt;切换<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            &#123;isShow &amp;&amp; <span class="tag">&lt;<span class="name">Home</span>&gt;</span><span class="tag">&lt;/<span class="name">Home</span>&gt;</span>&#125;</span></span><br><span class="line"><span class="language-xml">            &#123;isShow &amp;&amp; <span class="tag">&lt;<span class="name">About</span>&gt;</span><span class="tag">&lt;/<span class="name">About</span>&gt;</span>&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App1</span></span><br></pre></td></tr></table></figure>



<p>需求二:Context的共享</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//	context/index.js</span></span><br><span class="line"><span class="comment">//创建上下文</span></span><br><span class="line"><span class="keyword">import</span> &#123;createContext&#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">UserContext</span> = <span class="title function_">createContext</span>()</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">TokenContext</span> = <span class="title function_">createContext</span>()</span><br><span class="line"><span class="keyword">export</span> &#123;</span><br><span class="line">    <span class="title class_">UserContext</span>,</span><br><span class="line">    <span class="title class_">TokenContext</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="comment">//useUserToken hook</span></span><br><span class="line">使用用户和token的hook</span><br><span class="line"><span class="keyword">import</span> &#123;useContext&#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">TokenContext</span>, <span class="title class_">UserContext</span>&#125; <span class="keyword">from</span> <span class="string">&quot;../context&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">useUserToken</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="comment">//用户上下文</span></span><br><span class="line">    <span class="keyword">const</span> user = <span class="title function_">useContext</span>(<span class="title class_">UserContext</span>);</span><br><span class="line">    <span class="comment">//token上下文</span></span><br><span class="line">    <span class="keyword">const</span> token = <span class="title function_">useContext</span>(<span class="title class_">TokenContext</span>);</span><br><span class="line">    <span class="keyword">return</span> [user,token]</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> useUserToken;</span><br></pre></td></tr></table></figure>

<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="comment">//实际的应用</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123;memo&#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;useUserToken&#125; <span class="keyword">from</span> <span class="string">&quot;../hooks&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Home</span> = <span class="title function_">memo</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> [user,token] = <span class="title function_">useUserToken</span>()</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">h2</span>&gt;</span>用户的信息<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                用户的姓名:&#123;user.name&#125;,用户年龄:&#123;user.age&#125;</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                用户token:&#123;token.name&#125;</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Profile</span> = <span class="title function_">memo</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> [user,token] = <span class="title function_">useUserToken</span>()</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">h2</span>&gt;</span>用户的信息<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                用户的姓名:&#123;user.name&#125;,用户年龄:&#123;user.age&#125;</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                用户token:&#123;token.name&#125;</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Context</span> = <span class="title function_">memo</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> [user,token] = <span class="title function_">useUserToken</span>()</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">Home</span>&gt;</span><span class="tag">&lt;/<span class="name">Home</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">Profile</span>&gt;</span><span class="tag">&lt;/<span class="name">Profile</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Context</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>这个上下文可以通过以前的内容来获得</p>
<p>需求三:获取滚动位置</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="comment">//useScrollPosition的hook</span></span><br><span class="line"><span class="keyword">import</span> &#123;useEffect, useState&#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">useScrollPosition</span> ()&#123;</span><br><span class="line">    <span class="keyword">const</span> [ scrollX, setScrollX ] = <span class="title function_">useState</span>(<span class="number">0</span>)</span><br><span class="line">    <span class="keyword">const</span> [ scrollY, setScrollY ] = <span class="title function_">useState</span>(<span class="number">0</span>)</span><br><span class="line">    <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">//获得y</span></span><br><span class="line">            <span class="keyword">const</span> <span class="title function_">handleScroll</span> = (<span class="params"></span>)=&gt;&#123;</span><br><span class="line">                <span class="title function_">setScrollY</span>(<span class="variable language_">window</span>.<span class="property">scrollY</span>)</span><br><span class="line">                <span class="title function_">setScrollX</span>(<span class="variable language_">window</span>.<span class="property">scrollX</span>)</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//监听鼠标滑动</span></span><br><span class="line">            <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;scroll&#x27;</span>,handleScroll)</span><br><span class="line">            <span class="comment">//取消监听</span></span><br><span class="line">            <span class="keyword">return</span> <span class="function">()=&gt;</span>&#123;</span><br><span class="line">                <span class="variable language_">document</span>.<span class="title function_">removeEventListener</span>(<span class="string">&#x27;scroll&#x27;</span>,handleScroll)</span><br><span class="line">            &#125;</span><br><span class="line">    &#125;, []);</span><br><span class="line">    <span class="keyword">return</span> [scrollX,scrollY]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> useScrollPosition</span><br></pre></td></tr></table></figure>



<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="comment">//使用</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123;memo&#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;useScrollPosition&#125; <span class="keyword">from</span> <span class="string">&quot;../hooks&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">GetScroll</span> = <span class="title function_">memo</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> [scrollX,scrollY] = <span class="title function_">useScrollPosition</span>()</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">h2</span>&gt;</span>获取屏幕位置:&#123;scrollX&#125;,&#123;scrollY&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">MyComponent</span> = <span class="title function_">memo</span>(</span><br><span class="line">    <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">GetScroll</span>&gt;</span><span class="tag">&lt;/<span class="name">GetScroll</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">MyComponent</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">```</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">需求四：localStorge数据存储</span><br><span class="line"></span><br><span class="line">```jsx</span><br><span class="line">//useLocalStorage hook</span><br><span class="line">import &#123;useEffect, useState&#125; from &quot;react&quot;;</span><br><span class="line"></span><br><span class="line">function useLocalStorage (key)&#123;</span><br><span class="line">    //获取本地存储的信息</span><br><span class="line">    const [data, setData] = useState(()=&gt;&#123;</span><br><span class="line">        const item = localStorage.getItem(key)</span><br><span class="line">        if(!item)return&#x27;&#x27;</span><br><span class="line">        return JSON.parse(item)</span><br><span class="line">    &#125;);</span><br><span class="line">    //存储信息</span><br><span class="line">    useEffect(() =&gt; &#123;</span><br><span class="line">        localStorage.setItem(key,JSON.stringify(data))</span><br><span class="line">    &#125;, [data]);</span><br><span class="line">    return [data,setData]</span><br><span class="line">&#125;</span><br><span class="line">export default useLocalStorage</span><br></pre></td></tr></table></figure>

<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="comment">//使用</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123;memo&#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;useLocalStorage&#125; <span class="keyword">from</span> <span class="string">&quot;../hooks&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> token = <span class="title function_">memo</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            我的token为:&#123;token&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">LocalStorageData</span> = <span class="title function_">memo</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> [token,setToken] = <span class="title function_">useLocalStorage</span>(<span class="string">&#x27;token&#x27;</span>)</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">setTokenMessage</span> ()&#123;</span><br><span class="line">        <span class="title function_">setToken</span>(<span class="string">&#x27;hello&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;setTokenMessage&#125;</span>&gt;</span>设置token<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">div</span>&gt;</span>我的token为:&#123;token&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">LocalStorageData</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>





































</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="http://example.com">Charlotte</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://example.com/2023/10/04/%E5%89%8D%E7%AB%AF%E6%A1%86%E6%9E%B6/01react/">http://example.com/2023/10/04/%E5%89%8D%E7%AB%AF%E6%A1%86%E6%9E%B6/01react/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://example.com" target="_blank">Charlotte的个人博客</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2023/11/22/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95/NodeJs/" title="面试01-NodeJs"><img class="cover" src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">面试01-NodeJs</div></div></a></div><div class="next-post pull-right"><a href="/2023/10/01/%E5%89%8D%E7%AB%AF%E7%9A%84%E5%B7%A5%E7%A8%8B%E5%8C%96/Git/" title="Git 和 Github的使用"><img class="cover" src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Git 和 Github的使用</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9F%BA%E7%A1%80"><span class="toc-text">基础</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-text">基本使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%80%E5%8F%91%E9%9C%80%E8%A6%81%E7%9A%84%E4%BE%9D%E8%B5%96%E5%8C%85"><span class="toc-text">开发需要的依赖包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Hello-React%E6%A1%88%E4%BE%8B"><span class="toc-text">Hello React案例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JSX%E8%AF%AD%E6%B3%95"><span class="toc-text">JSX语法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#jsx%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-text">jsx的使用</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#jsx%E7%9A%84%E4%B9%A6%E5%86%99%E8%A7%84%E8%8C%83"><span class="toc-text">jsx的书写规范</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#jsx%E7%9A%84%E6%B3%A8%E9%87%8A"><span class="toc-text">jsx的注释</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#jsx%E5%B5%8C%E5%85%A5%E5%8F%98%E9%87%8F%E4%BD%9C%E4%B8%BA%E5%AD%90%E5%85%83%E7%B4%A0"><span class="toc-text">jsx嵌入变量作为子元素</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#jsx%E5%B5%8C%E5%85%A5%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-text">jsx嵌入表达式</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#jsx%E4%BD%BF%E7%94%A8"><span class="toc-text">jsx使用</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#jsx%E7%BB%91%E5%AE%9A%E5%B1%9E%E6%80%A7-%E4%BE%8B%E5%A6%82%EF%BC%9Atitle%E5%B1%9E%E6%80%A7"><span class="toc-text">jsx绑定属性(例如：title属性)</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#React"><span class="toc-text">React</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%84%9A%E6%89%8B%E6%9E%B6"><span class="toc-text">脚手架</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#react%E4%BA%8B%E4%BB%B6%E7%BB%91%E5%AE%9A-%E6%8E%A8%E8%8D%90%E4%BC%A0%E5%85%A5%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0"><span class="toc-text">react事件绑定(推荐传入箭头函数)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6%E5%8F%82%E6%95%B0%E4%BC%A0%E9%80%92"><span class="toc-text">事件参数传递</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9D%A1%E4%BB%B6%E6%B8%B2%E6%9F%93"><span class="toc-text">条件渲染</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%84%9A%E6%89%8B%E6%9E%B6%E5%BC%80%E5%8F%91"><span class="toc-text">脚手架开发</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="toc-text">初始化</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84"><span class="toc-text">目录结构</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%84%9A%E6%89%8B%E6%9E%B6%E7%9A%84webpack"><span class="toc-text">脚手架的webpack</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%97%E8%A1%A8%E6%B8%B2%E6%9F%93"><span class="toc-text">列表渲染</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%84%9A%E6%89%8B%E6%9E%B6-1"><span class="toc-text">脚手架</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%84%E4%BB%B6%E5%8C%96%E5%BC%80%E5%8F%91"><span class="toc-text">组件化开发</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-text">基本概念</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-text">生命周期</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%84%E4%BB%B6%E4%B9%8B%E9%97%B4%E7%9A%84%E9%80%9A%E4%BF%A1"><span class="toc-text">组件之间的通信</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%88%B6%E4%BC%A0%E5%AD%90"><span class="toc-text">父传子</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AD%90%E4%BC%A0%E7%88%B6"><span class="toc-text">子传父</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1%E6%A1%88%E4%BE%8B%EF%BC%88tab%E6%A0%8F%E5%88%87%E6%8D%A2%EF%BC%89"><span class="toc-text">组件通信案例（tab栏切换）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#React%E4%B8%AD%E7%9A%84%E6%8F%92%E6%A7%BD"><span class="toc-text">React中的插槽</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E7%BB%84%E4%BB%B6%E7%9A%84children"><span class="toc-text">组件的children</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#props%E6%9D%A5%E5%AE%9E%E7%8E%B0"><span class="toc-text">props来实现</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%9D%9E%E7%88%B6%E5%AD%90%E9%97%B4%E7%9A%84%E9%80%9A%E4%BF%A1"><span class="toc-text">非父子间的通信</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#Context"><span class="toc-text">Context</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96"><span class="toc-text">性能优化</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#keys%E4%BC%98%E5%8C%96"><span class="toc-text">keys优化</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#render%E5%87%BD%E6%95%B0%E4%BC%98%E5%8C%96"><span class="toc-text">render函数优化</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#PureComponent"><span class="toc-text">PureComponent</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%AB%98%E9%98%B6%E7%BB%84%E4%BB%B6memo"><span class="toc-text">高阶组件memo</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%8D%E5%8F%AF%E5%8F%98%E7%9A%84%E6%95%B0%E6%8D%AE"><span class="toc-text">不可变的数据</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96DOM%E6%96%B9%E5%BC%8Frefs"><span class="toc-text">获取DOM方式refs</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8E%9F%E7%90%86%E7%B1%BB%E7%9A%84"><span class="toc-text">原理类的</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BD%BF%E7%94%A8setState"><span class="toc-text">为什么使用setState</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#vue3%E5%92%8Creact%E4%B8%AD%E5%9C%A8%E6%95%B0%E6%8D%AE%E4%B8%8A%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-text">vue3和react中在数据上的区别</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#React%E7%9A%84setState%E6%98%AF%E5%BC%82%E6%AD%A5%E6%9B%B4%E6%96%B0%E7%9A%84%E4%BC%98%E7%82%B9"><span class="toc-text">React的setState是异步更新的优点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#setState%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-text">setState的使用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#setState%E5%92%8B18%E5%89%8D%E5%92%8C%E5%90%8E%E5%8C%BA%E5%88%AB"><span class="toc-text">setState咋18前和后区别</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%A8react%E4%B8%AD%E5%86%99css%E7%9A%84%E6%96%B9%E6%A1%88"><span class="toc-text">在react中写css的方案</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%86%85%E8%81%94%E6%A0%B7%E5%BC%8F"><span class="toc-text">内联样式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8D%95%E7%8B%AC%E7%9A%84css%E6%96%87%E4%BB%B6%E5%BC%95%E5%85%A5"><span class="toc-text">单独的css文件引入</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CSS-Module%E5%86%99%E6%B3%95"><span class="toc-text">CSS Module写法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CSS-in-JS-%E5%86%99%E6%B3%95"><span class="toc-text">CSS in JS 写法</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%A2%84%E5%A4%87%E7%9F%A5%E8%AF%86"><span class="toc-text">预备知识</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8-1"><span class="toc-text">基本使用</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9C%A8css%E4%B8%AD%E4%BD%BF%E7%94%A8js-props%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-text">在css中使用js(props的使用)</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8props"><span class="toc-text">使用props</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8attrs%E7%BB%99%E6%A0%87%E7%AD%BE%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%8F%90%E4%BE%9B%E5%B1%9E%E6%80%A7"><span class="toc-text">使用attrs给标签字符串提供属性</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E5%85%A8%E5%B1%80%E7%9A%84%E6%A0%B7%E5%BC%8F"><span class="toc-text">设置全局的样式</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A0%B7%E5%BC%8F%E7%9A%84%E7%BB%A7%E6%89%BF"><span class="toc-text">样式的继承</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8A%A8%E6%80%81%E6%B7%BB%E5%8A%A0class"><span class="toc-text">动态添加class</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Redux"><span class="toc-text">Redux</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#js%E7%9A%84%E7%BA%AF%E5%87%BD%E6%95%B0"><span class="toc-text">js的纯函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5"><span class="toc-text">核心概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#action"><span class="toc-text">action</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#reducer"><span class="toc-text">reducer</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9B%E5%BB%BAstore"><span class="toc-text">创建store</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#redux%E4%B8%89%E5%A4%A7%E5%8E%9F%E5%88%99"><span class="toc-text">redux三大原则</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#react-redux%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-text">react-redux的使用</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%82%E6%AD%A5%E6%93%8D%E4%BD%9C"><span class="toc-text">异步操作</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#React%E5%B7%A5%E5%85%B7%EF%BC%88devtools%EF%BC%89"><span class="toc-text">React工具（devtools）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Reducer%E7%9A%84%E6%8B%86%E5%88%86"><span class="toc-text">Reducer的拆分</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ReduxToolkit-%E7%9A%84%E4%BD%BF%E7%94%A8%EF%BC%88%E4%B9%9F%E6%98%AF%E4%BB%A5%E5%89%8Dredux%E7%9A%84%E7%AE%80%E5%8C%96"><span class="toc-text">ReduxToolkit 的使用（也是以前redux的简化)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8-2"><span class="toc-text">基本使用</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#configureStore"><span class="toc-text">configureStore</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#createSlice-%E5%A6%82%E4%B8%8B%E9%9D%A2%E7%9A%84%E4%BB%A3%E7%A0%81"><span class="toc-text">createSlice(如下面的代码)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#createAsyncThunk%EF%BC%88%E8%BF%9B%E8%A1%8C%E5%BC%82%E6%AD%A5%E6%93%8D%E4%BD%9C%EF%BC%89"><span class="toc-text">createAsyncThunk（进行异步操作）</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#redux%E9%87%8C%E9%9D%A2%E4%BB%A3%E7%A0%81"><span class="toc-text">redux里面代码</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E5%88%87%E7%89%87"><span class="toc-text">创建切片</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9B%E5%BB%BAstore-1"><span class="toc-text">创建store</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#extraReducer"><span class="toc-text">extraReducer</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E7%A7%8D%E5%86%99%E6%B3%95"><span class="toc-text">第一种写法</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#State%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86"><span class="toc-text">State状态管理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#React-Router%E4%BD%BF%E7%94%A8"><span class="toc-text">React Router使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8-3"><span class="toc-text">基本使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%8B%E5%8A%A8%E5%AE%9E%E7%8E%B0%E8%B7%AF%E7%94%B1%E8%B7%B3%E8%BD%AC"><span class="toc-text">手动实现路由跳转</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E5%8F%82%E6%95%B0%E4%BC%A0%E9%80%92"><span class="toc-text">路由参数传递</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%B9router%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E7%9A%84%E4%BC%98%E5%8C%96"><span class="toc-text">对router配置文件的优化</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Hooks"><span class="toc-text">Hooks</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E7%9F%A5%E8%AF%86"><span class="toc-text">基本知识</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%81%9A%E4%B8%80%E4%B8%AA%E8%AE%A1%E6%95%B0%E5%99%A8%E7%9A%84%E6%A1%88%E4%BE%8B"><span class="toc-text">做一个计数器的案例</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#useState%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-text">useState的使用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Effect-Hook%E4%BD%BF%E7%94%A8"><span class="toc-text">Effect Hook使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%9C%E7%94%A8"><span class="toc-text">作用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B8%85%E9%99%A4Effect"><span class="toc-text">清除Effect</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%A4%9A%E4%B8%AAEffect"><span class="toc-text">使用多个Effect</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95"><span class="toc-text">解决方法</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89Hook"><span class="toc-text">自定义Hook</span></a></li></ol></li></ol></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2024 By Charlotte</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"></div><div id="rightside-config-show"><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div class="no-result" id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>